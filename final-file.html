<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Modes - All Tools</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .controls {
            padding: 30px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .tool-selector {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .tool-selector label {
            font-weight: 600;
            color: #495057;
            font-size: 1.1em;
        }

        .tool-selector select {
            flex: 1;
            min-width: 300px;
            padding: 12px 15px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            color: #495057;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tool-selector select:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .tool-selector select:hover {
            border-color: #adb5bd;
        }

        .content {
            padding: 30px;
            min-height: 400px;
        }

        .tool-content {
            display: none;
        }

        .tool-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-message {
            text-align: center;
            color: #6c757d;
            font-size: 1.2em;
            margin-top: 50px;
        }

        .welcome-message h2 {
            color: #495057;
            margin-bottom: 15px;
        }

        /* Calculator Styles */
        .calculator {
            max-width: 600px;
            margin: 0 auto;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .calculator h3 {
            text-align: center;
            color: #495057;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #495057;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 16px;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #4facfe;
        }

        .btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            background: #e8f5e8;
            border-left: 4px solid #28a745;
            border-radius: 5px;
            font-weight: 600;
            color: #155724;
        }

        .error {
            background: #f8d7da;
            border-left-color: #dc3545;
            color: #721c24;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
        }

        .card h4 {
            color: #495057;
            margin-bottom: 10px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .tool-selector {
                flex-direction: column;
                align-items: stretch;
            }

            .tool-selector select {
                min-width: auto;
            }

            .header h1 {
                font-size: 2em;
            }

            .header p {
                font-size: 1em;
            }

            .container {
                margin: 10px;
                border-radius: 10px;
            }

            .controls, .content {
                padding: 20px;
            }
        }

        /* Canvas styles for drawing tools */
        canvas {
            border: 2px solid #dee2e6;
            border-radius: 5px;
            margin: 10px 0;
            cursor: crosshair;
        }

        /* Table styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        table th, table td {
            border: 1px solid #dee2e6;
            padding: 8px 12px;
            text-align: center;
        }

        table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        /* Clock styles */
        .clock-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }

        .clock {
            width: 200px;
            height: 200px;
            border: 3px solid #495057;
            border-radius: 50%;
            position: relative;
            background: white;
        }

        .clock-hand {
            position: absolute;
            background: #495057;
            transform-origin: bottom center;
            left: 50%;
        }

        .hour-hand {
            width: 4px;
            height: 60px;
            margin-left: -2px;
            bottom: 50%;
        }

        .minute-hand {
            width: 2px;
            height: 80px;
            margin-left: -1px;
            bottom: 50%;
        }

        .clock-center {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #495057;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* Spinner styles */
        .spinner-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }

        .spinner {
            width: 200px;
            height: 200px;
            border: 3px solid #495057;
            border-radius: 50%;
            position: relative;
            background: conic-gradient(red 0deg 60deg, blue 60deg 120deg, green 120deg 180deg, yellow 180deg 240deg, orange 240deg 300deg, purple 300deg 360deg);
            cursor: pointer;
        }

        .spinner-arrow {
            position: absolute;
            width: 4px;
            height: 90px;
            background: black;
            left: 50%;
            top: 10px;
            transform-origin: bottom center;
            margin-left: -2px;
            transition: transform 2s ease-out;
        }

        /* Dice styles */
        .dice-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .dice {
            width: 60px;
            height: 60px;
            border: 2px solid #495057;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Chart container */
        .chart-container {
            width: 100%;
            height: 400px;
            margin: 20px 0;
            position: relative;
        }

        /* Coming soon message */
        .coming-soon {
            text-align: center;
            padding: 50px 20px;
            color: #6c757d;
            font-size: 1.2em;
        }

        .coming-soon h3 {
            color: #495057;
            margin-bottom: 15px;
        }

        .coming-soon p {
            margin-bottom: 10px;
        }

        /* Fraction visual styles */
        .fraction-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            gap: 20px;
        }

        .fraction-strip, .fraction-circle {
            border: 2px solid #495057;
            background: #f8f9fa;
        }

        .fraction-strip {
            width: 200px;
            height: 40px;
            display: flex;
        }

        .fraction-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
        }

        .fraction-part {
            background: #4facfe;
            opacity: 0.7;
        }

        /* Array grid */
        .array-grid {
            display: inline-grid;
            gap: 2px;
            margin: 20px;
            padding: 10px;
            border: 2px solid #495057;
            border-radius: 5px;
        }

        .array-cell {
            width: 20px;
            height: 20px;
            border: 1px solid #adb5bd;
            background: #e9ecef;
        }

        .array-cell.filled {
            background: #4facfe;
        }

        /* Ten frame */
        .ten-frame {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 5px;
            width: 250px;
            margin: 20px auto;
            padding: 10px;
            border: 3px solid #495057;
            border-radius: 5px;
        }

        .ten-frame-cell {
            width: 40px;
            height: 40px;
            border: 2px solid #495057;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: white;
            cursor: pointer;
        }

        .ten-frame-cell.filled {
            background: #4facfe;
        }

        /* Hundreds chart */
        .hundreds-chart {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 1px;
            max-width: 500px;
            margin: 20px auto;
            border: 2px solid #495057;
        }

        .hundreds-cell {
            aspect-ratio: 1;
            border: 1px solid #adb5bd;
            display: flex;
            justify-content: center;
            align-items: center;
            background: white;
            cursor: pointer;
            font-size: 12px;
        }

        .hundreds-cell:hover {
            background: #e9ecef;
        }

        .hundreds-cell.highlighted {
            background: #4facfe;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ§® Math Modes</h1>
            <p>Your Complete Mathematical Toolkit</p>
        </div>

        <div class="controls">
            <div class="tool-selector">
                <label for="toolSelect">Choose a Tool:</label>
                <select id="toolSelect">
                    <option value="">Select a mathematical tool...</option>
                    <option value="mixed-number-subtraction">Mixed Number Subtraction</option>
                    <option value="surface-area-cone">Surface Area of Cone</option>
                    <option value="simple-angle">Simple Angle</option>
                    <option value="corresponding-angles">Corresponding Angles</option>
                    <option value="area-rectangle">Area of Rectangle</option>
                    <option value="perimeter-rectangle">Perimeter of Rectangle</option>
                    <option value="area-triangle">Area of Triangle</option>
                    <option value="perimeter-triangle">Perimeter of Triangle</option>
                    <option value="area-circle">Area of Circle</option>
                    <option value="circumference-circle">Circumference of Circle</option>
                    <option value="volume-triangular-prism">Volume of Triangular Prism</option>
                    <option value="surface-area-triangular-prism">Surface Area of Triangular Prism</option>
                    <option value="net-triangular-prism">Net of Triangular Prism</option>
                    <option value="volume-rectangular-prism">Volume of Rectangular Prism</option>
                    <option value="surface-area-rectangular-prism">Surface Area of Rectangular Prism</option>
                    <option value="net-rectangular-prism">Net of Rectangular Prism</option>
                    <option value="volume-cylinder">Volume of Cylinder</option>
                    <option value="surface-area-cylinder">Surface Area of Cylinder</option>
                    <option value="net-cone">Net of Cone</option>
                    <option value="volume-square-pyramid">Volume of Square Pyramid</option>
                    <option value="surface-area-square-pyramid">Surface Area of Square Pyramid</option>
                    <option value="net-square-pyramid">Net of Square Pyramid</option>
                    <option value="solving-x-linear">Solving for x (Linear Equation)</option>
                    <option value="addition-algorithm">Addition Algorithm</option>
                    <option value="subtraction-algorithm">Subtraction Algorithm</option>
                    <option value="multiplication-algorithm">Multiplication Algorithm</option>
                    <option value="long-division">Long Division</option>
                    <option value="dedmas-calculator">Dedmas Calculator</option>
                    <option value="table-equation-finder">Table Equation Finder</option>
                    <option value="fraction-addition">Fraction Addition</option>
                    <option value="fraction-subtraction">Fraction Subtraction</option>
                    <option value="fraction-multiplication">Fraction Multiplication</option>
                    <option value="fraction-division">Fraction Division</option>
                    <option value="mixed-number-addition">Mixed Number Addition</option>
                    <option value="mixed-number-multiplication">Mixed Number Multiplication</option>
                    <option value="mixed-number-division">Mixed Number Division</option>
                    <option value="number-line">Number Line</option>
                    <option value="line-graph">Line Graph (Time Series)</option>
                    <option value="bar-graph">Bar Graph</option>
                    <option value="pictograph">Pictograph</option>
                    <option value="stem-leaf-plot">Stem and Leaf Plot</option>
                    <option value="us-currency">US Currency Calculator</option>
                    <option value="canadian-currency">Canadian Currency Calculator</option>
                    <option value="graphing-calculator">Graphing Calculator</option>
                    <option value="shape-transformation">Shape Transformation Tool</option>
                    <option value="base-ten-blocks">Base Ten Blocks</option>
                    <option value="algebra-tiles">Algebra Tiles</option>
                    <option value="analog-clock">Analog Clock</option>
                    <option value="probability-spinner">Probability Spinner</option>
                    <option value="dice-roller">Dice Roller</option>
                    <option value="fraction-strips">Fraction Strips</option>
                    <option value="fraction-circles">Fraction Circles</option>
                    <option value="multiplication-array">Multiplication Array</option>
                    <option value="ten-frame">Ten Frame</option>
                    <option value="hundreds-chart">Hundreds Chart</option>
                    <option value="factor-tree">Factor Tree</option>
                    <option value="multiplication-number-bond">Multiplication Number Bond</option>
                    <option value="addition-number-bond">Addition Number Bond</option>
                    <option value="focus-statement-mode">Focus Statement Mode</option>
                    <option value="interactive-function-explorer">Interactive Function Explorer</option>
                    <option value="scientific-notation">Scientific Notation</option>
                    <option value="exponent-rules">Exponent Rules</option>
                    <option value="irrational-number">Irrational Number</option>
                    <option value="data-set-analyzer">Data Set Analyzer</option>
                    <option value="probability-simulator">Probability Simulator</option>
                    <option value="function-transformation">Function Transformation</option>
                    <option value="systems-equations">Systems of Equations</option>
                    <option value="linear-equation-data">Linear Equation From Data</option>
                    <option value="congruence-similarity">Congruence Similarity</option>
                    <option value="interactive-coordinate-plane">Interactive Coordinate Plane</option>
                    <option value="geometric-series">Geometric Series</option>
                </select>
            </div>
        </div>

        <div class="content">
            <div id="welcome" class="welcome-message">
                <h2>Welcome to Math Modes</h2>
                <p>Select a tool from the dropdown menu above to get started with your mathematical calculations and visualizations.</p>
            </div>

            <!-- Mixed Number Subtraction -->
            <div id="mixed-number-subtraction" class="tool-content">
                <div class="calculator">
                    <h3>Mixed Number Subtraction</h3>
                    <div class="input-group">
                        <label>First Mixed Number:</label>
                        <input type="number" id="mixedWhole1" placeholder="Whole number" min="0">
                        <input type="number" id="mixedNum1" placeholder="Numerator" min="0">
                        <input type="number" id="mixedDen1" placeholder="Denominator" min="1">
                    </div>
                    <div class="input-group">
                        <label>Second Mixed Number:</label>
                        <input type="number" id="mixedWhole2" placeholder="Whole number" min="0">
                        <input type="number" id="mixedNum2" placeholder="Numerator" min="0">
                        <input type="number" id="mixedDen2" placeholder="Denominator" min="1">
                    </div>
                    <button class="btn" onclick="calculateMixedSubtraction()">Calculate</button>
                    <div id="mixedSubResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Surface Area of Cone -->
            <div id="surface-area-cone" class="tool-content">
                <div class="calculator">
                    <h3>Surface Area of Cone</h3>
                    <div class="input-group">
                        <label>Radius (r):</label>
                        <input type="number" id="coneRadius" placeholder="Enter radius" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Slant Height (l):</label>
                        <input type="number" id="coneSlant" placeholder="Enter slant height" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateConeSurfaceArea()">Calculate</button>
                    <div id="coneSurfaceResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Simple Angle -->
            <div id="simple-angle" class="tool-content">
                <div class="calculator">
                    <h3>Simple Angle Calculator</h3>
                    <div class="input-group">
                        <label>Angle in Degrees:</label>
                        <input type="number" id="angleInput" placeholder="Enter angle" min="0" max="360" step="0.1">
                    </div>
                    <button class="btn" onclick="calculateAngle()">Analyze Angle</button>
                    <div id="angleResult" class="result" style="display:none;"></div>
                    <canvas id="angleCanvas" width="300" height="300" style="display:none;"></canvas>
                </div>
            </div>

            <!-- Corresponding Angles -->
            <div id="corresponding-angles" class="tool-content">
                <div class="calculator">
                    <h3>Corresponding Angles</h3>
                    <div class="input-group">
                        <label>Known Angle (degrees):</label>
                        <input type="number" id="knownAngle" placeholder="Enter known angle" min="0" max="180" step="0.1">
                    </div>
                    <button class="btn" onclick="calculateCorrespondingAngles()">Find Corresponding Angles</button>
                    <div id="correspondingResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Area of Rectangle -->
            <div id="area-rectangle" class="tool-content">
                <div class="calculator">
                    <h3>Area of Rectangle</h3>
                    <div class="input-group">
                        <label>Length:</label>
                        <input type="number" id="rectLength" placeholder="Enter length" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Width:</label>
                        <input type="number" id="rectWidth" placeholder="Enter width" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateRectangleArea()">Calculate Area</button>
                    <div id="rectAreaResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Perimeter of Rectangle -->
            <div id="perimeter-rectangle" class="tool-content">
                <div class="calculator">
                    <h3>Perimeter of Rectangle</h3>
                    <div class="input-group">
                        <label>Length:</label>
                        <input type="number" id="rectPerimLength" placeholder="Enter length" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Width:</label>
                        <input type="number" id="rectPerimWidth" placeholder="Enter width" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateRectanglePerimeter()">Calculate Perimeter</button>
                    <div id="rectPerimResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Area of Triangle -->
            <div id="area-triangle" class="tool-content">
                <div class="calculator">
                    <h3>Area of Triangle</h3>
                    <div class="input-group">
                        <label>Base:</label>
                        <input type="number" id="triBase" placeholder="Enter base" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Height:</label>
                        <input type="number" id="triHeight" placeholder="Enter height" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateTriangleArea()">Calculate Area</button>
                    <div id="triAreaResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Perimeter of Triangle -->
            <div id="perimeter-triangle" class="tool-content">
                <div class="calculator">
                    <h3>Perimeter of Triangle</h3>
                    <div class="input-group">
                        <label>Side A:</label>
                        <input type="number" id="triSideA" placeholder="Enter side A" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Side B:</label>
                        <input type="number" id="triSideB" placeholder="Enter side B" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Side C:</label>
                        <input type="number" id="triSideC" placeholder="Enter side C" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateTrianglePerimeter()">Calculate Perimeter</button>
                    <div id="triPerimResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Area of Circle -->
            <div id="area-circle" class="tool-content">
                <div class="calculator">
                    <h3>Area of Circle</h3>
                    <div class="input-group">
                        <label>Radius:</label>
                        <input type="number" id="circleRadius" placeholder="Enter radius" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateCircleArea()">Calculate Area</button>
                    <div id="circleAreaResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Circumference of Circle -->
            <div id="circumference-circle" class="tool-content">
                <div class="calculator">
                    <h3>Circumference of Circle</h3>
                    <div class="input-group">
                        <label>Radius:</label>
                        <input type="number" id="circumRadius" placeholder="Enter radius" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateCircumference()">Calculate Circumference</button>
                    <div id="circumResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Volume of Triangular Prism -->
            <div id="volume-triangular-prism" class="tool-content">
                <div class="calculator">
                    <h3>Volume of Triangular Prism</h3>
                    <div class="input-group">
                        <label>Triangle Base:</label>
                        <input type="number" id="triPrismBase" placeholder="Enter base" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Triangle Height:</label>
                        <input type="number" id="triPrismHeight" placeholder="Enter height" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Prism Length:</label>
                        <input type="number" id="triPrismLength" placeholder="Enter length" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateTriangularPrismVolume()">Calculate Volume</button>
                    <div id="triPrismVolumeResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Surface Area of Triangular Prism -->
            <div id="surface-area-triangular-prism" class="tool-content">
                <div class="calculator">
                    <h3>Surface Area of Triangular Prism</h3>
                    <div class="input-group">
                        <label>Triangle Base:</label>
                        <input type="number" id="triPrismSurfBase" placeholder="Enter base" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Triangle Height:</label>
                        <input type="number" id="triPrismSurfHeight" placeholder="Enter height" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Side A:</label>
                        <input type="number" id="triPrismSideA" placeholder="Enter side A" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Side B:</label>
                        <input type="number" id="triPrismSideB" placeholder="Enter side B" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Side C:</label>
                        <input type="number" id="triPrismSideC" placeholder="Enter side C" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Prism Length:</label>
                        <input type="number" id="triPrismSurfLength" placeholder="Enter length" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateTriangularPrismSurfaceArea()">Calculate Surface Area</button>
                    <div id="triPrismSurfResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Net of Triangular Prism -->
            <div id="net-triangular-prism" class="tool-content">
                <div class="calculator">
                    <h3>Net of Triangular Prism</h3>
                    <p>This tool shows the 2D net (unfolded shape) of a triangular prism.</p>
                    <div class="input-group">
                        <label>Triangle Base:</label>
                        <input type="number" id="netTriBase" placeholder="Enter base" min="1" max="10" step="0.1" value="3">
                    </div>
                    <div class="input-group">
                        <label>Triangle Height:</label>
                        <input type="number" id="netTriHeight" placeholder="Enter height" min="1" max="10" step="0.1" value="4">
                    </div>
                    <div class="input-group">
                        <label>Prism Length:</label>
                        <input type="number" id="netTriLength" placeholder="Enter length" min="1" max="10" step="0.1" value="5">
                    </div>
                    <button class="btn" onclick="drawTriangularPrismNet()">Draw Net</button>
                    <canvas id="triPrismNetCanvas" width="600" height="400" style="display:none;"></canvas>
                </div>
            </div>

            <!-- Volume of Rectangular Prism -->
            <div id="volume-rectangular-prism" class="tool-content">
                <div class="calculator">
                    <h3>Volume of Rectangular Prism</h3>
                    <div class="input-group">
                        <label>Length:</label>
                        <input type="number" id="rectPrismLength" placeholder="Enter length" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Width:</label>
                        <input type="number" id="rectPrismWidth" placeholder="Enter width" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Height:</label>
                        <input type="number" id="rectPrismHeight" placeholder="Enter height" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateRectangularPrismVolume()">Calculate Volume</button>
                    <div id="rectPrismVolumeResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Surface Area of Rectangular Prism -->
            <div id="surface-area-rectangular-prism" class="tool-content">
                <div class="calculator">
                    <h3>Surface Area of Rectangular Prism</h3>
                    <div class="input-group">
                        <label>Length:</label>
                        <input type="number" id="rectPrismSurfLength" placeholder="Enter length" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Width:</label>
                        <input type="number" id="rectPrismSurfWidth" placeholder="Enter width" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Height:</label>
                        <input type="number" id="rectPrismSurfHeight" placeholder="Enter height" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateRectangularPrismSurfaceArea()">Calculate Surface Area</button>
                    <div id="rectPrismSurfResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Net of Rectangular Prism -->
            <div id="net-rectangular-prism" class="tool-content">
                <div class="calculator">
                    <h3>Net of Rectangular Prism</h3>
                    <p>This tool shows the 2D net (unfolded shape) of a rectangular prism.</p>
                    <div class="input-group">
                        <label>Length:</label>
                        <input type="number" id="netRectLength" placeholder="Enter length" min="1" max="10" step="0.1" value="4">
                    </div>
                    <div class="input-group">
                        <label>Width:</label>
                        <input type="number" id="netRectWidth" placeholder="Enter width" min="1" max="10" step="0.1" value="3">
                    </div>
                    <div class="input-group">
                        <label>Height:</label>
                        <input type="number" id="netRectHeight" placeholder="Enter height" min="1" max="10" step="0.1" value="2">
                    </div>
                    <button class="btn" onclick="drawRectangularPrismNet()">Draw Net</button>
                    <canvas id="rectPrismNetCanvas" width="600" height="400" style="display:none;"></canvas>
                </div>
            </div>

            <!-- Volume of Cylinder -->
            <div id="volume-cylinder" class="tool-content">
                <div class="calculator">
                    <h3>Volume of Cylinder</h3>
                    <div class="input-group">
                        <label>Radius:</label>
                        <input type="number" id="cylinderRadius" placeholder="Enter radius" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Height:</label>
                        <input type="number" id="cylinderHeight" placeholder="Enter height" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateCylinderVolume()">Calculate Volume</button>
                    <div id="cylinderVolumeResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Surface Area of Cylinder -->
            <div id="surface-area-cylinder" class="tool-content">
                <div class="calculator">
                    <h3>Surface Area of Cylinder</h3>
                    <div class="input-group">
                        <label>Radius:</label>
                        <input type="number" id="cylinderSurfRadius" placeholder="Enter radius" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Height:</label>
                        <input type="number" id="cylinderSurfHeight" placeholder="Enter height" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculateCylinderSurfaceArea()">Calculate Surface Area</button>
                    <div id="cylinderSurfResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Net of Cone -->
            <div id="net-cone" class="tool-content">
                <div class="calculator">
                    <h3>Net of Cone</h3>
                    <p>This tool shows the 2D net (unfolded shape) of a cone.</p>
                    <div class="input-group">
                        <label>Radius:</label>
                        <input type="number" id="netConeRadius" placeholder="Enter radius" min="1" max="10" step="0.1" value="3">
                    </div>
                    <div class="input-group">
                        <label>Slant Height:</label>
                        <input type="number" id="netConeSlant" placeholder="Enter slant height" min="1" max="15" step="0.1" value="5">
                    </div>
                    <button class="btn" onclick="drawConeNet()">Draw Net</button>
                    <canvas id="coneNetCanvas" width="600" height="400" style="display:none;"></canvas>
                </div>
            </div>

            <!-- Volume of Square Pyramid -->
            <div id="volume-square-pyramid" class="tool-content">
                <div class="calculator">
                    <h3>Volume of Square Pyramid</h3>
                    <div class="input-group">
                        <label>Base Side Length:</label>
                        <input type="number" id="pyramidBase" placeholder="Enter base side" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Height:</label>
                        <input type="number" id="pyramidHeight" placeholder="Enter height" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculatePyramidVolume()">Calculate Volume</button>
                    <div id="pyramidVolumeResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Surface Area of Square Pyramid -->
            <div id="surface-area-square-pyramid" class="tool-content">
                <div class="calculator">
                    <h3>Surface Area of Square Pyramid</h3>
                    <div class="input-group">
                        <label>Base Side Length:</label>
                        <input type="number" id="pyramidSurfBase" placeholder="Enter base side" min="0" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Slant Height:</label>
                        <input type="number" id="pyramidSlant" placeholder="Enter slant height" min="0" step="0.01">
                    </div>
                    <button class="btn" onclick="calculatePyramidSurfaceArea()">Calculate Surface Area</button>
                    <div id="pyramidSurfResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Net of Square Pyramid -->
            <div id="net-square-pyramid" class="tool-content">
                <div class="calculator">
                    <h3>Net of Square Pyramid</h3>
                    <p>This tool shows the 2D net (unfolded shape) of a square pyramid.</p>
                    <div class="input-group">
                        <label>Base Side Length:</label>
                        <input type="number" id="netPyramidBase" placeholder="Enter base side" min="1" max="10" step="0.1" value="4">
                    </div>
                    <div class="input-group">
                        <label>Slant Height:</label>
                        <input type="number" id="netPyramidSlant" placeholder="Enter slant height" min="1" max="15" step="0.1" value="6">
                    </div>
                    <button class="btn" onclick="drawPyramidNet()">Draw Net</button>
                    <canvas id="pyramidNetCanvas" width="600" height="400" style="display:none;"></canvas>
                </div>
            </div>

            <!-- Solving for x (Linear Equation) -->
            <div id="solving-x-linear" class="tool-content">
                <div class="calculator">
                    <h3>Solving for x (Linear Equation)</h3>
                    <p>Solve equations in the form: ax + b = c</p>
                    <div class="input-group">
                        <label>Coefficient (a):</label>
                        <input type="number" id="linearA" placeholder="Enter coefficient of x" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Constant (b):</label>
                        <input type="number" id="linearB" placeholder="Enter constant term" step="0.01">
                    </div>
                    <div class="input-group">
                        <label>Result (c):</label>
                        <input type="number" id="linearC" placeholder="Enter result" step="0.01">
                    </div>
                    <button class="btn" onclick="solveLinearEquation()">Solve for x</button>
                    <div id="linearResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Addition Algorithm -->
            <div id="addition-algorithm" class="tool-content">
                <div class="calculator">
                    <h3>Addition Algorithm</h3>
                    <p>Step-by-step addition with carrying</p>
                    <div class="input-group">
                        <label>First Number:</label>
                        <input type="number" id="addNum1" placeholder="Enter first number" min="0">
                    </div>
                    <div class="input-group">
                        <label>Second Number:</label>
                        <input type="number" id="addNum2" placeholder="Enter second number" min="0">
                    </div>
                    <button class="btn" onclick="showAdditionAlgorithm()">Show Steps</button>
                    <div id="additionSteps" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Subtraction Algorithm -->
            <div id="subtraction-algorithm" class="tool-content">
                <div class="calculator">
                    <h3>Subtraction Algorithm</h3>
                    <p>Step-by-step subtraction with borrowing</p>
                    <div class="input-group">
                        <label>First Number (larger):</label>
                        <input type="number" id="subNum1" placeholder="Enter first number" min="0">
                    </div>
                    <div class="input-group">
                        <label>Second Number:</label>
                        <input type="number" id="subNum2" placeholder="Enter second number" min="0">
                    </div>
                    <button class="btn" onclick="showSubtractionAlgorithm()">Show Steps</button>
                    <div id="subtractionSteps" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Multiplication Algorithm -->
            <div id="multiplication-algorithm" class="tool-content">
                <div class="calculator">
                    <h3>Multiplication Algorithm</h3>
                    <p>Step-by-step multiplication</p>
                    <div class="input-group">
                        <label>First Number:</label>
                        <input type="number" id="multNum1" placeholder="Enter first number" min="0">
                    </div>
                    <div class="input-group">
                        <label>Second Number:</label>
                        <input type="number" id="multNum2" placeholder="Enter second number" min="0">
                    </div>
                    <button class="btn" onclick="showMultiplicationAlgorithm()">Show Steps</button>
                    <div id="multiplicationSteps" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Long Division -->
            <div id="long-division" class="tool-content">
                <div class="calculator">
                    <h3>Long Division</h3>
                    <p>Step-by-step long division</p>
                    <div class="input-group">
                        <label>Dividend (number being divided):</label>
                        <input type="number" id="dividend" placeholder="Enter dividend" min="1">
                    </div>
                    <div class="input-group">
                        <label>Divisor (number dividing by):</label>
                        <input type="number" id="divisor" placeholder="Enter divisor" min="1">
                    </div>
                    <button class="btn" onclick="showLongDivision()">Show Steps</button>
                    <div id="longDivisionSteps" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- DEDMAS Calculator -->
            <div id="dedmas-calculator" class="tool-content">
                <div class="calculator">
                    <h3>DEDMAS Calculator</h3>
                    <p>Order of operations: Division, Exponents, Division/Multiplication, Addition/Subtraction</p>
                    <div class="input-group">
                        <label>Mathematical Expression:</label>
                        <input type="text" id="dedmasExpression" placeholder="e.g., 2 + 3 * 4^2 - 10 / 2">
                    </div>
                    <button class="btn" onclick="calculateDEDMAS()">Calculate</button>
                    <div id="dedmasResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Table Equation Finder -->
            <div id="table-equation-finder" class="tool-content">
                <div class="calculator">
                    <h3>Table Equation Finder</h3>
                    <p>Find the equation from a table of x and y values</p>
                    <div class="input-group">
                        <label>Enter x,y pairs (one per line):</label>
                        <textarea id="tableData" rows="6" placeholder="1,2&#10;2,4&#10;3,6&#10;4,8" style="width:100%; padding:10px; border:2px solid #dee2e6; border-radius:5px;"></textarea>
                    </div>
                    <button class="btn" onclick="findTableEquation()">Find Equation</button>
                    <div id="tableEquationResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Fraction Addition -->
            <div id="fraction-addition" class="tool-content">
                <div class="calculator">
                    <h3>Fraction Addition</h3>
                    <div class="input-group">
                        <label>First Fraction:</label>
                        <input type="number" id="fracAddNum1" placeholder="Numerator" min="0">
                        <input type="number" id="fracAddDen1" placeholder="Denominator" min="1">
                    </div>
                    <div class="input-group">
                        <label>Second Fraction:</label>
                        <input type="number" id="fracAddNum2" placeholder="Numerator" min="0">
                        <input type="number" id="fracAddDen2" placeholder="Denominator" min="1">
                    </div>
                    <button class="btn" onclick="calculateFractionAddition()">Add Fractions</button>
                    <div id="fractionAddResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Fraction Subtraction -->
            <div id="fraction-subtraction" class="tool-content">
                <div class="calculator">
                    <h3>Fraction Subtraction</h3>
                    <div class="input-group">
                        <label>First Fraction:</label>
                        <input type="number" id="fracSubNum1" placeholder="Numerator">
                        <input type="number" id="fracSubDen1" placeholder="Denominator" min="1">
                    </div>
                    <div class="input-group">
                        <label>Second Fraction:</label>
                        <input type="number" id="fracSubNum2" placeholder="Numerator">
                        <input type="number" id="fracSubDen2" placeholder="Denominator" min="1">
                    </div>
                    <button class="btn" onclick="calculateFractionSubtraction()">Subtract Fractions</button>
                    <div id="fractionSubResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Fraction Multiplication -->
            <div id="fraction-multiplication" class="tool-content">
                <div class="calculator">
                    <h3>Fraction Multiplication</h3>
                    <div class="input-group">
                        <label>First Fraction:</label>
                        <input type="number" id="fracMultNum1" placeholder="Numerator">
                        <input type="number" id="fracMultDen1" placeholder="Denominator" min="1">
                    </div>
                    <div class="input-group">
                        <label>Second Fraction:</label>
                        <input type="number" id="fracMultNum2" placeholder="Numerator">
                        <input type="number" id="fracMultDen2" placeholder="Denominator" min="1">
                    </div>
                    <button class="btn" onclick="calculateFractionMultiplication()">Multiply Fractions</button>
                    <div id="fractionMultResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Fraction Division -->
            <div id="fraction-division" class="tool-content">
                <div class="calculator">
                    <h3>Fraction Division</h3>
                    <div class="input-group">
                        <label>First Fraction:</label>
                        <input type="number" id="fracDivNum1" placeholder="Numerator">
                        <input type="number" id="fracDivDen1" placeholder="Denominator" min="1">
                    </div>
                    <div class="input-group">
                        <label>Second Fraction:</label>
                        <input type="number" id="fracDivNum2" placeholder="Numerator" min="1">
                        <input type="number" id="fracDivDen2" placeholder="Denominator" min="1">
                    </div>
                    <button class="btn" onclick="calculateFractionDivision()">Divide Fractions</button>
                    <div id="fractionDivResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Mixed Number Addition -->
            <div id="mixed-number-addition" class="tool-content">
                <div class="calculator">
                    <h3>Mixed Number Addition</h3>
                    <div class="input-group">
                        <label>First Mixed Number:</label>
                        <input type="number" id="mixedAddWhole1" placeholder="Whole number" min="0">
                        <input type="number" id="mixedAddNum1" placeholder="Numerator" min="0">
                        <input type="number" id="mixedAddDen1" placeholder="Denominator" min="1">
                    </div>
                    <div class="input-group">
                        <label>Second Mixed Number:</label>
                        <input type="number" id="mixedAddWhole2" placeholder="Whole number" min="0">
                        <input type="number" id="mixedAddNum2" placeholder="Numerator" min="0">
                        <input type="number" id="mixedAddDen2" placeholder="Denominator" min="1">
                    </div>
                    <button class="btn" onclick="calculateMixedAddition()">Add Mixed Numbers</button>
                    <div id="mixedAddResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Mixed Number Multiplication -->
            <div id="mixed-number-multiplication" class="tool-content">
                <div class="calculator">
                    <h3>Mixed Number Multiplication</h3>
                    <div class="input-group">
                        <label>First Mixed Number:</label>
                        <input type="number" id="mixedMultWhole1" placeholder="Whole number" min="0">
                        <input type="number" id="mixedMultNum1" placeholder="Numerator" min="0">
                        <input type="number" id="mixedMultDen1" placeholder="Denominator" min="1">
                    </div>
                    <div class="input-group">
                        <label>Second Mixed Number:</label>
                        <input type="number" id="mixedMultWhole2" placeholder="Whole number" min="0">
                        <input type="number" id="mixedMultNum2" placeholder="Numerator" min="0">
                        <input type="number" id="mixedMultDen2" placeholder="Denominator" min="1">
                    </div>
                    <button class="btn" onclick="calculateMixedMultiplication()">Multiply Mixed Numbers</button>
                    <div id="mixedMultResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Mixed Number Division -->
            <div id="mixed-number-division" class="tool-content">
                <div class="calculator">
                    <h3>Mixed Number Division</h3>
                    <div class="input-group">
                        <label>First Mixed Number:</label>
                        <input type="number" id="mixedDivWhole1" placeholder="Whole number" min="0">
                        <input type="number" id="mixedDivNum1" placeholder="Numerator" min="0">
                        <input type="number" id="mixedDivDen1" placeholder="Denominator" min="1">
                    </div>
                    <div class="input-group">
                        <label>Second Mixed Number:</label>
                        <input type="number" id="mixedDivWhole2" placeholder="Whole number" min="0">
                        <input type="number" id="mixedDivNum2" placeholder="Numerator" min="0">
                        <input type="number" id="mixedDivDen2" placeholder="Denominator" min="1">
                    </div>
                    <button class="btn" onclick="calculateMixedDivision()">Divide Mixed Numbers</button>
                    <div id="mixedDivResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Number Line -->
            <div id="number-line" class="tool-content">
                <div class="calculator">
                    <h3>Number Line</h3>
                    <div class="input-group">
                        <label>Start Value:</label>
                        <input type="number" id="numberLineStart" placeholder="Start" value="-10">
                    </div>
                    <div class="input-group">
                        <label>End Value:</label>
                        <input type="number" id="numberLineEnd" placeholder="End" value="10">
                    </div>
                    <div class="input-group">
                        <label>Mark Point (optional):</label>
                        <input type="number" id="numberLineMark" placeholder="Point to mark">
                    </div>
                    <button class="btn" onclick="drawNumberLine()">Draw Number Line</button>
                    <canvas id="numberLineCanvas" width="600" height="100" style="display:none;"></canvas>
                </div>
            </div>

            <!-- Line Graph -->
            <div id="line-graph" class="tool-content">
                <div class="calculator">
                    <h3>Line Graph (Time Series)</h3>
                    <div class="input-group">
                        <label>Data Points (x,y pairs, one per line):</label>
                        <textarea id="lineGraphData" rows="6" placeholder="1,10&#10;2,15&#10;3,12&#10;4,18&#10;5,20" style="width:100%; padding:10px; border:2px solid #dee2e6; border-radius:5px;"></textarea>
                    </div>
                    <div class="input-group">
                        <label>Graph Title:</label>
                        <input type="text" id="lineGraphTitle" placeholder="Enter graph title" value="Time Series Data">
                    </div>
                    <button class="btn" onclick="drawLineGraph()">Create Graph</button>
                    <canvas id="lineGraphCanvas" width="600" height="400" style="display:none;"></canvas>
                </div>
            </div>

            <!-- Bar Graph -->
            <div id="bar-graph" class="tool-content">
                <div class="calculator">
                    <h3>Bar Graph</h3>
                    <div class="input-group">
                        <label>Data (label,value pairs, one per line):</label>
                        <textarea id="barGraphData" rows="6" placeholder="Apples,25&#10;Oranges,30&#10;Bananas,15&#10;Grapes,20" style="width:100%; padding:10px; border:2px solid #dee2e6; border-radius:5px;"></textarea>
                    </div>
                    <div class="input-group">
                        <label>Graph Title:</label>
                        <input type="text" id="barGraphTitle" placeholder="Enter graph title" value="Bar Chart">
                    </div>
                    <button class="btn" onclick="drawBarGraph()">Create Graph</button>
                    <canvas id="barGraphCanvas" width="600" height="400" style="display:none;"></canvas>
                </div>
            </div>

            <!-- Pictograph -->
            <div id="pictograph" class="tool-content">
                <div class="calculator">
                    <h3>Pictograph</h3>
                    <div class="input-group">
                        <label>Data (label,value pairs, one per line):</label>
                        <textarea id="pictographData" rows="6" placeholder="Cars,20&#10;Bikes,15&#10;Trucks,10&#10;Buses,5" style="width:100%; padding:10px; border:2px solid #dee2e6; border-radius:5px;"></textarea>
                    </div>
                    <div class="input-group">
                        <label>Symbol represents:</label>
                        <input type="number" id="pictographScale" placeholder="Each symbol = " value="5" min="1">
                    </div>
                    <div class="input-group">
                        <label>Graph Title:</label>
                        <input type="text" id="pictographTitle" placeholder="Enter graph title" value="Pictograph">
                    </div>
                    <button class="btn" onclick="drawPictograph()">Create Pictograph</button>
                    <div id="pictographResult" style="display:none;"></div>
                </div>
            </div>

            <!-- Stem and Leaf Plot -->
            <div id="stem-leaf-plot" class="tool-content">
                <div class="calculator">
                    <h3>Stem and Leaf Plot</h3>
                    <div class="input-group">
                        <label>Data Values (comma separated):</label>
                        <input type="text" id="stemLeafData" placeholder="e.g., 23,25,27,31,33,35,42,44,46,48" style="width:100%;">
                    </div>
                    <button class="btn" onclick="createStemLeafPlot()">Create Plot</button>
                    <div id="stemLeafResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- US Currency Calculator -->
            <div id="us-currency" class="tool-content">
                <div class="calculator">
                    <h3>US Currency Calculator</h3>
                    <div class="input-group">
                        <label>Pennies (1Â¢):</label>
                        <input type="number" id="pennies" placeholder="Number of pennies" min="0" value="0">
                    </div>
                    <div class="input-group">
                        <label>Nickels (5Â¢):</label>
                        <input type="number" id="nickels" placeholder="Number of nickels" min="0" value="0">
                    </div>
                    <div class="input-group">
                        <label>Dimes (10Â¢):</label>
                        <input type="number" id="dimes" placeholder="Number of dimes" min="0" value="0">
                    </div>
                    <div class="input-group">
                        <label>Quarters (25Â¢):</label>
                        <input type="number" id="quarters" placeholder="Number of quarters" min="0" value="0">
                    </div>
                    <div class="input-group">
                        <label>Dollar Bills ($1):</label>
                        <input type="number" id="dollars" placeholder="Number of dollars" min="0" value="0">
                    </div>
                    <button class="btn" onclick="calculateUSCurrency()">Calculate Total</button>
                    <div id="usCurrencyResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Canadian Currency Calculator -->
            <div id="canadian-currency" class="tool-content">
                <div class="calculator">
                    <h3>Canadian Currency Calculator</h3>
                    <div class="input-group">
                        <label>Pennies (1Â¢) - discontinued:</label>
                        <input type="number" id="canPennies" placeholder="Number of pennies" min="0" value="0">
                    </div>
                    <div class="input-group">
                        <label>Nickels (5Â¢):</label>
                        <input type="number" id="canNickels" placeholder="Number of nickels" min="0" value="0">
                    </div>
                    <div class="input-group">
                        <label>Dimes (10Â¢):</label>
                        <input type="number" id="canDimes" placeholder="Number of dimes" min="0" value="0">
                    </div>
                    <div class="input-group">
                        <label>Quarters (25Â¢):</label>
                        <input type="number" id="canQuarters" placeholder="Number of quarters" min="0" value="0">
                    </div>
                    <div class="input-group">
                        <label>Loonies ($1):</label>
                        <input type="number" id="loonies" placeholder="Number of loonies" min="0" value="0">
                    </div>
                    <div class="input-group">
                        <label>Toonies ($2):</label>
                        <input type="number" id="toonies" placeholder="Number of toonies" min="0" value="0">
                    </div>
                    <button class="btn" onclick="calculateCanadianCurrency()">Calculate Total</button>
                    <div id="canCurrencyResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Graphing Calculator -->
            <div id="graphing-calculator" class="tool-content">
                <div class="calculator">
                    <h3>Graphing Calculator</h3>
                    <div class="input-group">
                        <label>Function (use x as variable):</label>
                        <input type="text" id="graphFunction" placeholder="e.g., x^2, 2*x+1, sin(x)" value="x^2">
                    </div>
                    <div class="input-group">
                        <label>X Range:</label>
                        <input type="number" id="graphXMin" placeholder="Min X" value="-10" style="width:48%; margin-right:4%;">
                        <input type="number" id="graphXMax" placeholder="Max X" value="10" style="width:48%;">
                    </div>
                    <div class="input-group">
                        <label>Y Range:</label>
                        <input type="number" id="graphYMin" placeholder="Min Y" value="-10" style="width:48%; margin-right:4%;">
                        <input type="number" id="graphYMax" placeholder="Max Y" value="10" style="width:48%;">
                    </div>
                    <button class="btn" onclick="drawFunctionGraph()">Graph Function</button>
                    <canvas id="functionGraphCanvas" width="600" height="400" style="display:none;"></canvas>
                </div>
            </div>

            <!-- Shape Transformation Tool -->
            <div id="shape-transformation" class="tool-content">
                <div class="calculator">
                    <h3>Shape Transformation Tool</h3>
                    <div class="input-group">
                        <label>Transformation Type:</label>
                        <select id="transformationType">
                            <option value="translate">Translation</option>
                            <option value="rotate">Rotation</option>
                            <option value="reflect">Reflection</option>
                            <option value="scale">Scaling</option>
                        </select>
                    </div>
                    <div id="transformationControls"></div>
                    <button class="btn" onclick="applyTransformation()">Apply Transformation</button>
                    <canvas id="transformationCanvas" width="600" height="400" style="display:none;"></canvas>
                </div>
            </div>

            <!-- Base Ten Blocks -->
            <div id="base-ten-blocks" class="tool-content">
                <div class="calculator">
                    <h3>Base Ten Blocks</h3>
                    <div class="input-group">
                        <label>Number to represent:</label>
                        <input type="number" id="baseTenNumber" placeholder="Enter a number" min="0" max="9999" value="123">
                    </div>
                    <button class="btn" onclick="showBaseTenBlocks()">Show Blocks</button>
                    <div id="baseTenResult" style="display:none;"></div>
                </div>
            </div>

            <!-- Algebra Tiles -->
            <div id="algebra-tiles" class="tool-content">
                <div class="calculator">
                    <h3>Algebra Tiles</h3>
                    <div class="input-group">
                        <label>Expression (e.g., 2x + 3):</label>
                        <input type="text" id="algebraExpression" placeholder="Enter algebraic expression" value="2x + 3">
                    </div>
                    <button class="btn" onclick="showAlgebraTiles()">Show Tiles</button>
                    <div id="algebraTilesResult" style="display:none;"></div>
                </div>
            </div>

            <!-- Analog Clock -->
            <div id="analog-clock" class="tool-content">
                <div class="calculator">
                    <h3>Analog Clock</h3>
                    <div class="input-group">
                        <label>Hour (1-12):</label>
                        <input type="number" id="clockHour" placeholder="Hour" min="1" max="12" value="3">
                    </div>
                    <div class="input-group">
                        <label>Minute (0-59):</label>
                        <input type="number" id="clockMinute" placeholder="Minute" min="0" max="59" value="15">
                    </div>
                    <button class="btn" onclick="showAnalogClock()">Show Time</button>
                    <div class="clock-container">
                        <div id="analogClock" class="clock" style="display:none;">
                            <div id="hourHand" class="clock-hand hour-hand"></div>
                            <div id="minuteHand" class="clock-hand minute-hand"></div>
                            <div class="clock-center"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Probability Spinner -->
            <div id="probability-spinner" class="tool-content">
                <div class="calculator">
                    <h3>Probability Spinner</h3>
                    <div class="input-group">
                        <label>Number of Sections:</label>
                        <select id="spinnerSections">
                            <option value="2">2 sections</option>
                            <option value="3">3 sections</option>
                            <option value="4">4 sections</option>
                            <option value="6" selected>6 sections</option>
                            <option value="8">8 sections</option>
                        </select>
                    </div>
                    <button class="btn" onclick="spinSpinner()">Spin!</button>
                    <div class="spinner-container">
                        <div id="probabilitySpinner" class="spinner">
                            <div id="spinnerArrow" class="spinner-arrow"></div>
                        </div>
                    </div>
                    <div id="spinnerResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Dice Roller -->
            <div id="dice-roller" class="tool-content">
                <div class="calculator">
                    <h3>Dice Roller</h3>
                    <div class="input-group">
                        <label>Number of Dice:</label>
                        <select id="numberOfDice">
                            <option value="1" selected>1 die</option>
                            <option value="2">2 dice</option>
                            <option value="3">3 dice</option>
                            <option value="4">4 dice</option>
                            <option value="5">5 dice</option>
                            <option value="6">6 dice</option>
                        </select>
                    </div>
                    <button class="btn" onclick="rollDice()">Roll Dice</button>
                    <div id="diceContainer" class="dice-container"></div>
                    <div id="diceResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Fraction Strips -->
            <div id="fraction-strips" class="tool-content">
                <div class="calculator">
                    <h3>Fraction Strips</h3>
                    <div class="input-group">
                        <label>Numerator:</label>
                        <input type="number" id="stripNumerator" placeholder="Numerator" min="0" value="3">
                    </div>
                    <div class="input-group">
                        <label>Denominator:</label>
                        <input type="number" id="stripDenominator" placeholder="Denominator" min="1" value="4">
                    </div>
                    <button class="btn" onclick="showFractionStrips()">Show Fraction Strips</button>
                    <div id="fractionStripsResult" style="display:none;"></div>
                </div>
            </div>

            <!-- Fraction Circles -->
            <div id="fraction-circles" class="tool-content">
                <div class="calculator">
                    <h3>Fraction Circles</h3>
                    <div class="input-group">
                        <label>Numerator:</label>
                        <input type="number" id="circleNumerator" placeholder="Numerator" min="0" value="3">
                    </div>
                    <div class="input-group">
                        <label>Denominator:</label>
                        <input type="number" id="circleDenominator" placeholder="Denominator" min="1" value="8">
                    </div>
                    <button class="btn" onclick="showFractionCircles()">Show Fraction Circles</button>
                    <canvas id="fractionCircleCanvas" width="400" height="200" style="display:none;"></canvas>
                </div>
            </div>

            <!-- Multiplication Array -->
            <div id="multiplication-array" class="tool-content">
                <div class="calculator">
                    <h3>Multiplication Array</h3>
                    <div class="input-group">
                        <label>Rows:</label>
                        <input type="number" id="arrayRows" placeholder="Number of rows" min="1" max="12" value="3">
                    </div>
                    <div class="input-group">
                        <label>Columns:</label>
                        <input type="number" id="arrayColumns" placeholder="Number of columns" min="1" max="12" value="4">
                    </div>
                    <button class="btn" onclick="showMultiplicationArray()">Show Array</button>
                    <div id="multiplicationArrayResult" style="display:none;"></div>
                </div>
            </div>

            <!-- Ten Frame -->
            <div id="ten-frame" class="tool-content">
                <div class="calculator">
                    <h3>Ten Frame</h3>
                    <div class="input-group">
                        <label>Number to show (0-10):</label>
                        <input type="number" id="tenFrameNumber" placeholder="Enter number" min="0" max="10" value="7">
                    </div>
                    <button class="btn" onclick="showTenFrame()">Show Ten Frame</button>
                    <div id="tenFrameContainer" style="display:none;">
                        <div id="tenFrameGrid" class="ten-frame"></div>
                    </div>
                </div>
            </div>

            <!-- Hundreds Chart -->
            <div id="hundreds-chart" class="tool-content">
                <div class="calculator">
                    <h3>Hundreds Chart</h3>
                    <div class="input-group">
                        <label>Highlight multiples of:</label>
                        <input type="number" id="hundredsMultiple" placeholder="Enter number" min="1" max="50" value="5">
                    </div>
                    <button class="btn" onclick="showHundredsChart()">Show Chart</button>
                    <div id="hundredsChartContainer" style="display:none;">
                        <div id="hundredsChartGrid" class="hundreds-chart"></div>
                    </div>
                </div>
            </div>

            <!-- Factor Tree -->
            <div id="factor-tree" class="tool-content">
                <div class="calculator">
                    <h3>Factor Tree</h3>
                    <div class="input-group">
                        <label>Number to factor:</label>
                        <input type="number" id="factorNumber" placeholder="Enter number" min="2" max="1000" value="24">
                    </div>
                    <button class="btn" onclick="createFactorTree()">Create Factor Tree</button>
                    <div id="factorTreeResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Multiplication Number Bond -->
            <div id="multiplication-number-bond" class="tool-content">
                <div class="calculator">
                    <h3>Multiplication Number Bond</h3>
                    <div class="input-group">
                        <label>Product:</label>
                        <input type="number" id="multBondProduct" placeholder="Enter product" min="1" max="144" value="12">
                    </div>
                    <button class="btn" onclick="showMultiplicationBond()">Show Number Bond</button>
                    <div id="multBondResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Addition Number Bond -->
            <div id="addition-number-bond" class="tool-content">
                <div class="calculator">
                    <h3>Addition Number Bond</h3>
                    <div class="input-group">
                        <label>Sum:</label>
                        <input type="number" id="addBondSum" placeholder="Enter sum" min="1" max="20" value="10">
                    </div>
                    <button class="btn" onclick="showAdditionBond()">Show Number Bond</button>
                    <div id="addBondResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Focus Statement Mode -->
            <div id="focus-statement-mode" class="tool-content">
                <div class="calculator">
                    <h3>Focus Statement Mode</h3>
                    <p>Create focused mathematical statements and problems</p>
                    <div class="input-group">
                        <label>Problem Type:</label>
                        <select id="focusType">
                            <option value="equation">Equation</option>
                            <option value="word-problem">Word Problem</option>
                            <option value="theorem">Theorem</option>
                            <option value="definition">Definition</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Topic:</label>
                        <input type="text" id="focusTopic" placeholder="e.g., Pythagorean Theorem, Fractions, etc.">
                    </div>
                    <div class="input-group">
                        <label>Difficulty Level:</label>
                        <select id="focusDifficulty">
                            <option value="beginner">Beginner</option>
                            <option value="intermediate">Intermediate</option>
                            <option value="advanced">Advanced</option>
                        </select>
                    </div>
                    <button class="btn" onclick="generateFocusStatement()">Generate Statement</button>
                    <div id="focusResult" class="result" style="display:none;"></div>
                </div>
            </div>

            <!-- Coming Soon Tools -->
            <div id="interactive-function-explorer" class="tool-content">
                <div class="coming-soon">
                    <h3>Interactive Function Explorer</h3>
                    <p>Coming Soon!</p>
                    <p>This tool will allow you to explore mathematical functions interactively.</p>
                </div>
            </div>

            <div id="scientific-notation" class="tool-content">
                <div class="coming-soon">
                    <h3>Scientific Notation</h3>
                    <p>Coming Soon!</p>
                    <p>Convert between standard and scientific notation.</p>
                </div>
            </div>

            <div id="exponent-rules" class="tool-content">
                <div class="coming-soon">
                    <h3>Exponent Rules</h3>
                    <p>Coming Soon!</p>
                    <p>Learn and practice exponent rules and operations.</p>
                </div>
            </div>

            <div id="irrational-number" class="tool-content">
                <div class="coming-soon">
                    <h3>Irrational Number Explorer</h3>
                    <p>Coming Soon!</p>
                    <p>Explore irrational numbers and their properties.</p>
                </div>
            </div>

            <div id="data-set-analyzer" class="tool-content">
                <div class="coming-soon">
                    <h3>Data Set Analyzer</h3>
                    <p>Coming Soon!</p>
                    <p>Analyze statistical data sets with various measures.</p>
                </div>
            </div>

            <div id="probability-simulator" class="tool-content">
                <div class="coming-soon">
                    <h3>Probability Simulator</h3>
                    <p>Coming Soon!</p>
                    <p>Simulate probability experiments and events.</p>
                </div>
            </div>

            <div id="function-transformation" class="tool-content">
                <div class="coming-soon">
                    <h3>Function Transformation</h3>
                    <p>Coming Soon!</p>
                    <p>Visualize transformations of mathematical functions.</p>
                </div>
            </div>

            <div id="systems-equations" class="tool-content">
                <div class="coming-soon">
                    <h3>Systems of Equations</h3>
                    <p>Coming Soon!</p>
                    <p>Solve systems of linear equations graphically and algebraically.</p>
                </div>
            </div>

            <div id="linear-equation-data" class="tool-content">
                <div class="coming-soon">
                    <h3>Linear Equation From Data</h3>
                    <p>Coming Soon!</p>
                    <p>Find linear equations from data points.</p>
                </div>
            </div>

            <div id="congruence-similarity" class="tool-content">
                <div class="coming-soon">
                    <h3>Congruence & Similarity</h3>
                    <p>Coming Soon!</p>
                    <p>Explore geometric congruence and similarity.</p>
                </div>
            </div>

            <div id="interactive-coordinate-plane" class="tool-content">
                <div class="coming-soon">
                    <h3>Interactive Coordinate Plane</h3>
                    <p>Coming Soon!</p>
                    <p>Plot points and explore coordinate geometry.</p>
                </div>
            </div>

            <div id="geometric-series" class="tool-content">
                <div class="coming-soon">
                    <h3>Geometric Series</h3>
                    <p>Coming Soon!</p>
                    <p>Explore geometric sequences and series.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tool selection handler
        document.getElementById('toolSelect').addEventListener('change', function() {
            const selectedTool = this.value;
            
            // Hide all tool contents
            const toolContents = document.querySelectorAll('.tool-content');
            toolContents.forEach(content => {
                content.classList.remove('active');
            });
            
            // Hide welcome message
            document.getElementById('welcome').style.display = 'none';
            
            // Show selected tool
            if (selectedTool) {
                const selectedContent = document.getElementById(selectedTool);
                if (selectedContent) {
                    selectedContent.classList.add('active');
                }
            } else {
                document.getElementById('welcome').style.display = 'block';
            }
        });

        // Utility functions
        function gcd(a, b) {
            return b === 0 ? a : gcd(b, a % b);
        }

        function lcm(a, b) {
            return Math.abs(a * b) / gcd(a, b);
        }

        function simplifyFraction(num, den) {
            const g = gcd(Math.abs(num), Math.abs(den));
            return [num / g, den / g];
        }

        function showResult(elementId, content, isError = false) {
            const element = document.getElementById(elementId);
            element.innerHTML = content;
            element.className = isError ? 'result error' : 'result';
            element.style.display = 'block';
        }

        // Mixed Number Subtraction
        function calculateMixedSubtraction() {
            const whole1 = parseInt(document.getElementById('mixedWhole1').value) || 0;
            const num1 = parseInt(document.getElementById('mixedNum1').value) || 0;
            const den1 = parseInt(document.getElementById('mixedDen1').value) || 1;
            
            const whole2 = parseInt(document.getElementById('mixedWhole2').value) || 0;
            const num2 = parseInt(document.getElementById('mixedNum2').value) || 0;
            const den2 = parseInt(document.getElementById('mixedDen2').value) || 1;

            if (den1 === 0 || den2 === 0) {
                showResult('mixedSubResult', 'Error: Denominator cannot be zero', true);
                return;
            }

            // Convert to improper fractions
            const improper1 = whole1 * den1 + num1;
            const improper2 = whole2 * den2 + num2;

            // Find common denominator
            const commonDen = lcm(den1, den2);
            const newNum1 = improper1 * (commonDen / den1);
            const newNum2 = improper2 * (commonDen / den2);

            // Subtract
            const resultNum = newNum1 - newNum2;
            
            if (resultNum < 0) {
                showResult('mixedSubResult', 'Result is negative. Please ensure the first number is larger.', true);
                return;
            }

            // Convert back to mixed number
            const resultWhole = Math.floor(resultNum / commonDen);
            const resultFracNum = resultNum % commonDen;
            
            // Simplify
            const [simplifiedNum, simplifiedDen] = simplifyFraction(resultFracNum, commonDen);

            let result = `${whole1} ${num1}/${den1} - ${whole2} ${num2}/${den2} = `;
            if (resultWhole > 0 && simplifiedNum > 0) {
                result += `${resultWhole} ${simplifiedNum}/${simplifiedDen}`;
            } else if (resultWhole > 0) {
                result += `${resultWhole}`;
            } else if (simplifiedNum > 0) {
                result += `${simplifiedNum}/${simplifiedDen}`;
            } else {
                result += '0';
            }

            showResult('mixedSubResult', result);
        }

        // Surface Area of Cone
        function calculateConeSurfaceArea() {
            const radius = parseFloat(document.getElementById('coneRadius').value);
            const slant = parseFloat(document.getElementById('coneSlant').value);

            if (isNaN(radius) || isNaN(slant) || radius <= 0 || slant <= 0) {
                showResult('coneSurfaceResult', 'Please enter valid positive numbers for radius and slant height', true);
                return;
            }

            const baseArea = Math.PI * radius * radius;
            const lateralArea = Math.PI * radius * slant;
            const totalSurfaceArea = baseArea + lateralArea;

            const result = `
                <strong>Surface Area Calculation:</strong><br>
                Base Area = Ï€rÂ² = Ï€ Ã— ${radius}Â² = ${baseArea.toFixed(2)}<br>
                Lateral Area = Ï€rl = Ï€ Ã— ${radius} Ã— ${slant} = ${lateralArea.toFixed(2)}<br>
                <strong>Total Surface Area = ${totalSurfaceArea.toFixed(2)} square units</strong>
            `;

            showResult('coneSurfaceResult', result);
        }

        // Simple Angle
        function calculateAngle() {
            const angle = parseFloat(document.getElementById('angleInput').value);

            if (isNaN(angle)) {
                showResult('angleResult', 'Please enter a valid angle', true);
                return;
            }

            let angleType = '';
            if (angle === 0) angleType = 'Zero angle';
            else if (angle > 0 && angle < 90) angleType = 'Acute angle';
            else if (angle === 90) angleType = 'Right angle';
            else if (angle > 90 && angle < 180) angleType = 'Obtuse angle';
            else if (angle === 180) angleType = 'Straight angle';
            else if (angle > 180 && angle < 360) angleType = 'Reflex angle';
            else if (angle === 360) angleType = 'Full rotation';
            else angleType = 'Invalid angle (use 0-360Â°)';

            const radians = (angle * Math.PI / 180).toFixed(4);
            
            const result = `
                <strong>Angle Analysis:</strong><br>
                Angle: ${angle}Â°<br>
                Type: ${angleType}<br>
                In radians: ${radians}<br>
                Complementary angle: ${90 - angle}Â°<br>
                Supplementary angle: ${180 - angle}Â°
            `;

            showResult('angleResult', result);
            drawAngle(angle);
        }

        function drawAngle(angle) {
            const canvas = document.getElementById('angleCanvas');
            const ctx = canvas.getContext('2d');
            canvas.style.display = 'block';
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 80;
            
            // Draw angle arc
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, (angle * Math.PI) / 180);
            ctx.strokeStyle = '#4facfe';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // Draw angle lines
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX + radius, centerY);
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX + radius * Math.cos((angle * Math.PI) / 180), 
                      centerY + radius * Math.sin((angle * Math.PI) / 180));
            ctx.strokeStyle = '#495057';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Draw center point
            ctx.beginPath();
            ctx.arc(centerX, centerY, 3, 0, 2 * Math.PI);
            ctx.fillStyle = '#495057';
            ctx.fill();
        }

        // Corresponding Angles
        function calculateCorrespondingAngles() {
            const knownAngle = parseFloat(document.getElementById('knownAngle').value);

            if (isNaN(knownAngle) || knownAngle < 0 || knownAngle > 180) {
                showResult('correspondingResult', 'Please enter a valid angle between 0 and 180 degrees', true);
                return;
            }

            const corresponding = knownAngle;
            const alternate = knownAngle;
            const coInterior = 180 - knownAngle;

            const result = `
                <strong>Angle Relationships:</strong><br>
                Given angle: ${knownAngle}Â°<br>
                Corresponding angle: ${corresponding}Â°<br>
                Alternate angle: ${alternate}Â°<br>
                Co-interior angle: ${coInterior}Â°<br><br>
                <em>Note: These relationships apply when parallel lines are cut by a transversal.</em>
            `;

            showResult('correspondingResult', result);
        }

        // Area of Rectangle
        function calculateRectangleArea() {
            const length = parseFloat(document.getElementById('rectLength').value);
            const width = parseFloat(document.getElementById('rectWidth').value);

            if (isNaN(length) || isNaN(width) || length <= 0 || width <= 0) {
                showResult('rectAreaResult', 'Please enter valid positive numbers for length and width', true);
                return;
            }

            const area = length * width;
            
            const result = `
                <strong>Rectangle Area Calculation:</strong><br>
                Length = ${length} units<br>
                Width = ${width} units<br>
                Area = Length Ã— Width = ${length} Ã— ${width} = <strong>${area} square units</strong>
            `;

            showResult('rectAreaResult', result);
        }

        // Perimeter of Rectangle
        function calculateRectanglePerimeter() {
            const length = parseFloat(document.getElementById('rectPerimLength').value);
            const width = parseFloat(document.getElementById('rectPerimWidth').value);

            if (isNaN(length) || isNaN(width) || length <= 0 || width <= 0) {
                showResult('rectPerimResult', 'Please enter valid positive numbers for length and width', true);
                return;
            }

            const perimeter = 2 * (length + width);
            
            const result = `
                <strong>Rectangle Perimeter Calculation:</strong><br>
                Length = ${length} units<br>
                Width = ${width} units<br>
                Perimeter = 2 Ã— (Length + Width) = 2 Ã— (${length} + ${width}) = <strong>${perimeter} units</strong>
            `;

            showResult('rectPerimResult', result);
        }

        // Area of Triangle
        function calculateTriangleArea() {
            const base = parseFloat(document.getElementById('triBase').value);
            const height = parseFloat(document.getElementById('triHeight').value);

            if (isNaN(base) || isNaN(height) || base <= 0 || height <= 0) {
                showResult('triAreaResult', 'Please enter valid positive numbers for base and height', true);
                return;
            }

            const area = 0.5 * base * height;
            
            const result = `
                <strong>Triangle Area Calculation:</strong><br>
                Base = ${base} units<br>
                Height = ${height} units<br>
                Area = Â½ Ã— Base Ã— Height = Â½ Ã— ${base} Ã— ${height} = <strong>${area} square units</strong>
            `;

            showResult('triAreaResult', result);
        }

        // Perimeter of Triangle
        function calculateTrianglePerimeter() {
            const sideA = parseFloat(document.getElementById('triSideA').value);
            const sideB = parseFloat(document.getElementById('triSideB').value);
            const sideC = parseFloat(document.getElementById('triSideC').value);

            if (isNaN(sideA) || isNaN(sideB) || isNaN(sideC) || sideA <= 0 || sideB <= 0 || sideC <= 0) {
                showResult('triPerimResult', 'Please enter valid positive numbers for all sides', true);
                return;
            }

            // Check triangle inequality
            if (sideA + sideB <= sideC || sideA + sideC <= sideB || sideB + sideC <= sideA) {
                showResult('triPerimResult', 'These sides cannot form a valid triangle (triangle inequality violated)', true);
                return;
            }

            const perimeter = sideA + sideB + sideC;
            
            const result = `
                <strong>Triangle Perimeter Calculation:</strong><br>
                Side A = ${sideA} units<br>
                Side B = ${sideB} units<br>
                Side C = ${sideC} units<br>
                Perimeter = A + B + C = ${sideA} + ${sideB} + ${sideC} = <strong>${perimeter} units</strong>
            `;

            showResult('triPerimResult', result);
        }

        // Area of Circle
        function calculateCircleArea() {
            const radius = parseFloat(document.getElementById('circleRadius').value);

            if (isNaN(radius) || radius <= 0) {
                showResult('circleAreaResult', 'Please enter a valid positive number for radius', true);
                return;
            }

            const area = Math.PI * radius * radius;
            
            const result = `
                <strong>Circle Area Calculation:</strong><br>
                Radius = ${radius} units<br>
                Area = Ï€rÂ² = Ï€ Ã— ${radius}Â² = <strong>${area.toFixed(2)} square units</strong><br>
                <em>Exact answer: ${radius}Â²Ï€ square units</em>
            `;

            showResult('circleAreaResult', result);
        }

        // Circumference of Circle
        function calculateCircumference() {
            const radius = parseFloat(document.getElementById('circumRadius').value);

            if (isNaN(radius) || radius <= 0) {
                showResult('circumResult', 'Please enter a valid positive number for radius', true);
                return;
            }

            const circumference = 2 * Math.PI * radius;
            const diameter = 2 * radius;
            
            const result = `
                <strong>Circle Circumference Calculation:</strong><br>
                Radius = ${radius} units<br>
                Diameter = ${diameter} units<br>
                Circumference = 2Ï€r = 2 Ã— Ï€ Ã— ${radius} = <strong>${circumference.toFixed(2)} units</strong><br>
                <em>Exact answer: ${2 * radius}Ï€ units</em>
            `;

            showResult('circumResult', result);
        }

        // Volume of Triangular Prism
        function calculateTriangularPrismVolume() {
            const base = parseFloat(document.getElementById('triPrismBase').value);
            const height = parseFloat(document.getElementById('triPrismHeight').value);
            const length = parseFloat(document.getElementById('triPrismLength').value);

            if (isNaN(base) || isNaN(height) || isNaN(length) || base <= 0 || height <= 0 || length <= 0) {
                showResult('triPrismVolumeResult', 'Please enter valid positive numbers for all dimensions', true);
                return;
            }

            const triangleArea = 0.5 * base * height;
            const volume = triangleArea * length;
            
            const result = `
                <strong>Triangular Prism Volume Calculation:</strong><br>
                Triangle Base = ${base} units<br>
                Triangle Height = ${height} units<br>
                Prism Length = ${length} units<br>
                Triangle Area = Â½ Ã— ${base} Ã— ${height} = ${triangleArea} square units<br>
                Volume = Triangle Area Ã— Length = ${triangleArea} Ã— ${length} = <strong>${volume} cubic units</strong>
            `;

            showResult('triPrismVolumeResult', result);
        }

        // Surface Area of Triangular Prism
        function calculateTriangularPrismSurfaceArea() {
            const base = parseFloat(document.getElementById('triPrismSurfBase').value);
            const height = parseFloat(document.getElementById('triPrismSurfHeight').value);
            const sideA = parseFloat(document.getElementById('triPrismSideA').value);
            const sideB = parseFloat(document.getElementById('triPrismSideB').value);
            const sideC = parseFloat(document.getElementById('triPrismSideC').value);
            const length = parseFloat(document.getElementById('triPrismSurfLength').value);

            if (isNaN(base) || isNaN(height) || isNaN(sideA) || isNaN(sideB) || isNaN(sideC) || isNaN(length) ||
                base <= 0 || height <= 0 || sideA <= 0 || sideB <= 0 || sideC <= 0 || length <= 0) {
                showResult('triPrismSurfResult', 'Please enter valid positive numbers for all dimensions', true);
                return;
            }

            const triangleArea = 0.5 * base * height;
            const rectangleArea1 = sideA * length;
            const rectangleArea2 = sideB * length;
            const rectangleArea3 = sideC * length;
            const totalSurfaceArea = 2 * triangleArea + rectangleArea1 + rectangleArea2 + rectangleArea3;
            
            const result = `
                <strong>Triangular Prism Surface Area Calculation:</strong><br>
                Two triangular faces: 2 Ã— ${triangleArea} = ${2 * triangleArea} square units<br>
                Rectangle 1: ${sideA} Ã— ${length} = ${rectangleArea1} square units<br>
                Rectangle 2: ${sideB} Ã— ${length} = ${rectangleArea2} square units<br>
                Rectangle 3: ${sideC} Ã— ${length} = ${rectangleArea3} square units<br>
                <strong>Total Surface Area = ${totalSurfaceArea} square units</strong>
            `;

            showResult('triPrismSurfResult', result);
        }

        // Net of Triangular Prism
        function drawTriangularPrismNet() {
            const base = parseFloat(document.getElementById('netTriBase').value);
            const height = parseFloat(document.getElementById('netTriHeight').value);
            const length = parseFloat(document.getElementById('netTriLength').value);

            const canvas = document.getElementById('triPrismNetCanvas');
            const ctx = canvas.getContext('2d');
            canvas.style.display = 'block';
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const scale = 30;
            const startX = 50;
            const startY = 50;
            
            // Draw the net
            ctx.strokeStyle = '#495057';
            ctx.lineWidth = 2;
            ctx.fillStyle = '#e9ecef';
            
            // Central rectangle
            ctx.fillRect(startX, startY, length * scale, base * scale);
            ctx.strokeRect(startX, startY, length * scale, base * scale);
            
            // Top triangle
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(startX + length * scale, startY);
            ctx.lineTo(startX + length * scale / 2, startY - height * scale);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Bottom triangle
            ctx.beginPath();
            ctx.moveTo(startX, startY + base * scale);
            ctx.lineTo(startX + length * scale, startY + base * scale);
            ctx.lineTo(startX + length * scale / 2, startY + base * scale + height * scale);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Side rectangles
            ctx.fillRect(startX, startY + base * scale, length * scale, height * scale);
            ctx.strokeRect(startX, startY + base * scale, length * scale, height * scale);
            
            ctx.fillRect(startX - height * scale, startY, height * scale, base * scale);
            ctx.strokeRect(startX - height * scale, startY, height * scale, base * scale);
            
            // Labels
            ctx.fillStyle = '#495057';
            ctx.font = '12px Arial';
            ctx.fillText('Triangular Prism Net', startX, startY - 20);
        }

        // Volume of Rectangular Prism
        function calculateRectangularPrismVolume() {
            const length = parseFloat(document.getElementById('rectPrismLength').value);
            const width = parseFloat(document.getElementById('rectPrismWidth').value);
            const height = parseFloat(document.getElementById('rectPrismHeight').value);

            if (isNaN(length) || isNaN(width) || isNaN(height) || length <= 0 || width <= 0 || height <= 0) {
                showResult('rectPrismVolumeResult', 'Please enter valid positive numbers for all dimensions', true);
                return;
            }

            const volume = length * width * height;
            
            const result = `
                <strong>Rectangular Prism Volume Calculation:</strong><br>
                Length = ${length} units<br>
                Width = ${width} units<br>
                Height = ${height} units<br>
                Volume = Length Ã— Width Ã— Height = ${length} Ã— ${width} Ã— ${height} = <strong>${volume} cubic units</strong>
            `;

            showResult('rectPrismVolumeResult', result);
        }

        // Surface Area of Rectangular Prism
        function calculateRectangularPrismSurfaceArea() {
            const length = parseFloat(document.getElementById('rectPrismSurfLength').value);
            const width = parseFloat(document.getElementById('rectPrismSurfWidth').value);
            const height = parseFloat(document.getElementById('rectPrismSurfHeight').value);

            if (isNaN(length) || isNaN(width) || isNaN(height) || length <= 0 || width <= 0 || height <= 0) {
                showResult('rectPrismSurfResult', 'Please enter valid positive numbers for all dimensions', true);
                return;
            }

            const face1 = 2 * (length * width);
            const face2 = 2 * (length * height);
            const face3 = 2 * (width * height);
            const totalSurfaceArea = face1 + face2 + face3;
            
            const result = `
                <strong>Rectangular Prism Surface Area Calculation:</strong><br>
                Top and Bottom faces: 2 Ã— (${length} Ã— ${width}) = ${face1} square units<br>
                Front and Back faces: 2 Ã— (${length} Ã— ${height}) = ${face2} square units<br>
                Left and Right faces: 2 Ã— (${width} Ã— ${height}) = ${face3} square units<br>
                <strong>Total Surface Area = ${totalSurfaceArea} square units</strong>
            `;

            showResult('rectPrismSurfResult', result);
        }

        // Net of Rectangular Prism
        function drawRectangularPrismNet() {
            const length = parseFloat(document.getElementById('netRectLength').value);
            const width = parseFloat(document.getElementById('netRectWidth').value);
            const height = parseFloat(document.getElementById('netRectHeight').value);

            const canvas = document.getElementById('rectPrismNetCanvas');
            const ctx = canvas.getContext('2d');
            canvas.style.display = 'block';
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const scale = 40;
            const startX = 100;
            const startY = 100;
            
            ctx.strokeStyle = '#495057';
            ctx.lineWidth = 2;
            ctx.fillStyle = '#e9ecef';
            
            // Draw cross-shaped net
            // Center rectangle (front)
            ctx.fillRect(startX, startY, length * scale, height * scale);
            ctx.strokeRect(startX, startY, length * scale, height * scale);
            
            // Top rectangle
            ctx.fillRect(startX, startY - width * scale, length * scale, width * scale);
            ctx.strokeRect(startX, startY - width * scale, length * scale, width * scale);
            
            // Bottom rectangle
            ctx.fillRect(startX, startY + height * scale, length * scale, width * scale);
            ctx.strokeRect(startX, startY + height * scale, length * scale, width * scale);
            
            // Left rectangle
            ctx.fillRect(startX - width * scale, startY, width * scale, height * scale);
            ctx.strokeRect(startX - width * scale, startY, width * scale, height * scale);
            
            // Right rectangle
            ctx.fillRect(startX + length * scale, startY, width * scale, height * scale);
            ctx.strokeRect(startX + length * scale, startY, width * scale, height * scale);
            
            // Back rectangle
            ctx.fillRect(startX + length * scale + width * scale, startY, length * scale, height * scale);
            ctx.strokeRect(startX + length * scale + width * scale, startY, length * scale, height * scale);
            
            // Labels
            ctx.fillStyle = '#495057';
            ctx.font = '12px Arial';
            ctx.fillText('Rectangular Prism Net', startX, startY - width * scale - 20);
        }

        // Volume of Cylinder
        function calculateCylinderVolume() {
            const radius = parseFloat(document.getElementById('cylinderRadius').value);
            const height = parseFloat(document.getElementById('cylinderHeight').value);

            if (isNaN(radius) || isNaN(height) || radius <= 0 || height <= 0) {
                showResult('cylinderVolumeResult', 'Please enter valid positive numbers for radius and height', true);
                return;
            }

            const volume = Math.PI * radius * radius * height;
            
            const result = `
                <strong>Cylinder Volume Calculation:</strong><br>
                Radius = ${radius} units<br>
                Height = ${height} units<br>
                Volume = Ï€rÂ²h = Ï€ Ã— ${radius}Â² Ã— ${height} = <strong>${volume.toFixed(2)} cubic units</strong><br>
                <em>Exact answer: ${radius}Â²Ï€ Ã— ${height} cubic units</em>
            `;

            showResult('cylinderVolumeResult', result);
        }

        // Surface Area of Cylinder
        function calculateCylinderSurfaceArea() {
            const radius = parseFloat(document.getElementById('cylinderSurfRadius').value);
            const height = parseFloat(document.getElementById('cylinderSurfHeight').value);

            if (isNaN(radius) || isNaN(height) || radius <= 0 || height <= 0) {
                showResult('cylinderSurfResult', 'Please enter valid positive numbers for radius and height', true);
                return;
            }

            const baseArea = Math.PI * radius * radius;
            const lateralArea = 2 * Math.PI * radius * height;
            const totalSurfaceArea = 2 * baseArea + lateralArea;
            
            const result = `
                <strong>Cylinder Surface Area Calculation:</strong><br>
                Radius = ${radius} units<br>
                Height = ${height} units<br>
                Base Area = Ï€rÂ² = ${baseArea.toFixed(2)} square units<br>
                Lateral Area = 2Ï€rh = ${lateralArea.toFixed(2)} square units<br>
                <strong>Total Surface Area = 2 Ã— Base Area + Lateral Area = ${totalSurfaceArea.toFixed(2)} square units</strong>
            `;

            showResult('cylinderSurfResult', result);
        }

        // Net of Cone
        function drawConeNet() {
            const radius = parseFloat(document.getElementById('netConeRadius').value);
            const slant = parseFloat(document.getElementById('netConeSlant').value);

            const canvas = document.getElementById('coneNetCanvas');
            const ctx = canvas.getContext('2d');
            canvas.style.display = 'block';
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const scale = 30;
            const centerX = 150;
            const centerY = 200;
            
            ctx.strokeStyle = '#495057';
            ctx.lineWidth = 2;
            ctx.fillStyle = '#e9ecef';
            
            // Draw circular base
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius * scale, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            
            // Draw sector for lateral surface
            const sectorAngle = (2 * Math.PI * radius) / slant;
            const sectorCenterX = 400;
            const sectorCenterY = 200;
            
            ctx.beginPath();
            ctx.moveTo(sectorCenterX, sectorCenterY);
            ctx.arc(sectorCenterX, sectorCenterY, slant * scale, 0, sectorAngle);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#495057';
            ctx.font = '12px Arial';
            ctx.fillText('Base', centerX - 15, centerY + radius * scale + 20);
            ctx.fillText('Lateral Surface', sectorCenterX - 30, sectorCenterY + slant * scale + 20);
            ctx.fillText('Cone Net', 50, 30);
        }

        // Volume of Square Pyramid
        function calculatePyramidVolume() {
            const base = parseFloat(document.getElementById('pyramidBase').value);
            const height = parseFloat(document.getElementById('pyramidHeight').value);

            if (isNaN(base) || isNaN(height) || base <= 0 || height <= 0) {
                showResult('pyramidVolumeResult', 'Please enter valid positive numbers for base and height', true);
                return;
            }

            const baseArea = base * base;
            const volume = (1/3) * baseArea * height;
            
            const result = `
                <strong>Square Pyramid Volume Calculation:</strong><br>
                Base Side Length = ${base} units<br>
                Height = ${height} units<br>
                Base Area = ${base}Â² = ${baseArea} square units<br>
                Volume = â…“ Ã— Base Area Ã— Height = â…“ Ã— ${baseArea} Ã— ${height} = <strong>${volume.toFixed(2)} cubic units</strong>
            `;

            showResult('pyramidVolumeResult', result);
        }

        // Surface Area of Square Pyramid
        function calculatePyramidSurfaceArea() {
            const base = parseFloat(document.getElementById('pyramidSurfBase').value);
            const slant = parseFloat(document.getElementById('pyramidSlant').value);

            if (isNaN(base) || isNaN(slant) || base <= 0 || slant <= 0) {
                showResult('pyramidSurfResult', 'Please enter valid positive numbers for base and slant height', true);
                return;
            }

            const baseArea = base * base;
            const triangleArea = 0.5 * base * slant;
            const totalSurfaceArea = baseArea + 4 * triangleArea;
            
            const result = `
                <strong>Square Pyramid Surface Area Calculation:</strong><br>
                Base Side Length = ${base} units<br>
                Slant Height = ${slant} units<br>
                Base Area = ${base}Â² = ${baseArea} square units<br>
                Each Triangle Area = Â½ Ã— ${base} Ã— ${slant} = ${triangleArea} square units<br>
                <strong>Total Surface Area = Base Area + 4 Ã— Triangle Area = ${totalSurfaceArea} square units</strong>
            `;

            showResult('pyramidSurfResult', result);
        }

        // Net of Square Pyramid
        function drawPyramidNet() {
            const base = parseFloat(document.getElementById('netPyramidBase').value);
            const slant = parseFloat(document.getElementById('netPyramidSlant').value);

            const canvas = document.getElementById('pyramidNetCanvas');
            const ctx = canvas.getContext('2d');
            canvas.style.display = 'block';
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const scale = 30;
            const centerX = 300;
            const centerY = 200;
            
            ctx.strokeStyle = '#495057';
            ctx.lineWidth = 2;
            ctx.fillStyle = '#e9ecef';
            
            // Draw square base
            const halfBase = (base * scale) / 2;
            ctx.fillRect(centerX - halfBase, centerY - halfBase, base * scale, base * scale);
            ctx.strokeRect(centerX - halfBase, centerY - halfBase, base * scale, base * scale);
            
            // Draw four triangles around the base
            const triangleHeight = slant * scale;
            
            // Top triangle
            ctx.beginPath();
            ctx.moveTo(centerX - halfBase, centerY - halfBase);
            ctx.lineTo(centerX + halfBase, centerY - halfBase);
            ctx.lineTo(centerX, centerY - halfBase - triangleHeight);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Right triangle
            ctx.beginPath();
            ctx.moveTo(centerX + halfBase, centerY - halfBase);
            ctx.lineTo(centerX + halfBase, centerY + halfBase);
            ctx.lineTo(centerX + halfBase + triangleHeight, centerY);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Bottom triangle
            ctx.beginPath();
            ctx.moveTo(centerX + halfBase, centerY + halfBase);
            ctx.lineTo(centerX - halfBase, centerY + halfBase);
            ctx.lineTo(centerX, centerY + halfBase + triangleHeight);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Left triangle
            ctx.beginPath();
            ctx.moveTo(centerX - halfBase, centerY + halfBase);
            ctx.lineTo(centerX - halfBase, centerY - halfBase);
            ctx.lineTo(centerX - halfBase - triangleHeight, centerY);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#495057';
            ctx.font = '12px Arial';
            ctx.fillText('Square Pyramid Net', centerX - 50, centerY - halfBase - triangleHeight - 20);
        }

        // Solving for x (Linear Equation)
        function solveLinearEquation() {
            const a = parseFloat(document.getElementById('linearA').value);
            const b = parseFloat(document.getElementById('linearB').value);
            const c = parseFloat(document.getElementById('linearC').value);

            if (isNaN(a) || isNaN(b) || isNaN(c)) {
                showResult('linearResult', 'Please enter valid numbers for all coefficients', true);
                return;
            }

            if (a === 0) {
                if (b === c) {
                    showResult('linearResult', 'The equation has infinitely many solutions (any value of x works)', false);
                } else {
                    showResult('linearResult', 'The equation has no solution (inconsistent)', true);
                }
                return;
            }

            const x = (c - b) / a;
            
            const result = `
                <strong>Linear Equation Solution:</strong><br>
                Equation: ${a}x + ${b} = ${c}<br>
                Step 1: ${a}x = ${c} - ${b}<br>
                Step 2: ${a}x = ${c - b}<br>
                Step 3: x = ${c - b} Ã· ${a}<br>
                <strong>Solution: x = ${x}</strong><br><br>
                <em>Check: ${a} Ã— ${x} + ${b} = ${a * x + b}</em>
            `;

            showResult('linearResult', result);
        }

        // Addition Algorithm
        function showAdditionAlgorithm() {
            const num1 = parseInt(document.getElementById('addNum1').value);
            const num2 = parseInt(document.getElementById('addNum2').value);

            if (isNaN(num1) || isNaN(num2) || num1 < 0 || num2 < 0) {
                showResult('additionSteps', 'Please enter valid positive numbers', true);
                return;
            }

            const str1 = num1.toString();
            const str2 = num2.toString();
            const maxLength = Math.max(str1.length, str2.length);
            
            let result = '<strong>Addition Algorithm Steps:</strong><br><br>';
            result += '<div style="font-family: monospace; font-size: 14px;">';
            
            // Show the problem setup
            result += `  ${str1.padStart(maxLength, ' ')}<br>`;
            result += `+ ${str2.padStart(maxLength, ' ')}<br>`;
            result += `${'â”€'.repeat(maxLength + 2)}<br>`;
            
            // Perform addition with carrying
            let carry = 0;
            let sum = '';
            let steps = '';
            
            for (let i = maxLength - 1; i >= 0; i--) {
                const digit1 = i < str1.length ? parseInt(str1[str1.length - maxLength + i]) || 0 : 0;
                const digit2 = i < str2.length ? parseInt(str2[str2.length - maxLength + i]) || 0 : 0;
                
                const columnSum = digit1 + digit2 + carry;
                const resultDigit = columnSum % 10;
                carry = Math.floor(columnSum / 10);
                
                sum = resultDigit + sum;
                
                if (carry > 0 && i > 0) {
                    steps += `Column ${maxLength - i}: ${digit1} + ${digit2}${carry > 0 && i < maxLength - 1 ? ' + ' + (columnSum - digit1 - digit2) + ' (carry)' : ''} = ${columnSum}, write ${resultDigit}, carry ${carry}<br>`;
                } else {
                    steps += `Column ${maxLength - i}: ${digit1} + ${digit2}${carry > 0 && i < maxLength - 1 ? ' + ' + (columnSum - digit1 - digit2) + ' (carry)' : ''} = ${columnSum}<br>`;
                }
            }
            
            if (carry > 0) {
                sum = carry + sum;
            }
            
            result += `  ${sum}<br></div><br>`;
            result += '<strong>Step-by-step breakdown:</strong><br>';
            result += steps;
            result += `<br><strong>Final Answer: ${num1} + ${num2} = ${sum}</strong>`;

            showResult('additionSteps', result);
        }

        // Subtraction Algorithm
        function showSubtractionAlgorithm() {
            const num1 = parseInt(document.getElementById('subNum1').value);
            const num2 = parseInt(document.getElementById('subNum2').value);

            if (isNaN(num1) || isNaN(num2) || num1 < 0 || num2 < 0) {
                showResult('subtractionSteps', 'Please enter valid positive numbers', true);
                return;
            }

            if (num1 < num2) {
                showResult('subtractionSteps', 'First number should be larger than or equal to the second number', true);
                return;
            }

            const result = num1 - num2;
            
            let output = '<strong>Subtraction Algorithm Steps:</strong><br><br>';
            output += '<div style="font-family: monospace; font-size: 14px;">';
            output += `  ${num1}<br>`;
            output += `- ${num2}<br>`;
            output += `${'â”€'.repeat(Math.max(num1.toString().length, num2.toString().length) + 2)}<br>`;
            output += `  ${result}<br></div><br>`;
            
            // Show borrowing if needed
            const str1 = num1.toString();
            const str2 = num2.toString();
            let borrowingNeeded = false;
            
            for (let i = 0; i < Math.max(str1.length, str2.length); i++) {
                const digit1 = i < str1.length ? parseInt(str1[str1.length - 1 - i]) : 0;
                const digit2 = i < str2.length ? parseInt(str2[str2.length - 1 - i]) : 0;
                
                if (digit1 < digit2) {
                    borrowingNeeded = true;
                    break;
                }
            }
            
            if (borrowingNeeded) {
                output += '<strong>Note:</strong> This subtraction requires borrowing (regrouping).<br>';
                output += 'When a digit in the top number is smaller than the corresponding digit in the bottom number, we borrow from the next column to the left.';
            } else {
                output += '<strong>Note:</strong> This subtraction can be done without borrowing.';
            }
            
            output += `<br><br><strong>Final Answer: ${num1} - ${num2} = ${result}</strong>`;

            showResult('subtractionSteps', output);
        }

        // Multiplication Algorithm
        function showMultiplicationAlgorithm() {
            const num1 = parseInt(document.getElementById('multNum1').value);
            const num2 = parseInt(document.getElementById('multNum2').value);

            if (isNaN(num1) || isNaN(num2) || num1 < 0 || num2 < 0) {
                showResult('multiplicationSteps', 'Please enter valid positive numbers', true);
                return;
            }

            const result = num1 * num2;
            const str2 = num2.toString();
            
            let output = '<strong>Multiplication Algorithm Steps:</strong><br><br>';
            output += '<div style="font-family: monospace; font-size: 14px;">';
            output += `  ${num1}<br>`;
            output += `Ã— ${num2}<br>`;
            output += `${'â”€'.repeat(Math.max(num1.toString().length, num2.toString().length) + 2)}<br>`;
            
            if (str2.length === 1) {
                output += `  ${result}<br>`;
            } else {
                // Show partial products
                let partialProducts = [];
                for (let i = str2.length - 1; i >= 0; i--) {
                    const digit = parseInt(str2[i]);
                    const placeValue = Math.pow(10, str2.length - 1 - i);
                    const partialProduct = num1 * digit * placeValue;
                    
                    if (partialProduct > 0) {
                        partialProducts.push(partialProduct);
                        const paddedProduct = partialProduct.toString().padStart(result.toString().length, ' ');
                        output += `  ${paddedProduct}  (${num1} Ã— ${digit}${'0'.repeat(str2.length - 1 - i)})<br>`;
                    }
                }
                
                output += `${'â”€'.repeat(result.toString().length + 2)}<br>`;
                output += `  ${result}<br>`;
            }
            
            output += '</div><br>';
            output += `<strong>Final Answer: ${num1} Ã— ${num2} = ${result}</strong>`;

            showResult('multiplicationSteps', output);
        }

        // Long Division
        function showLongDivision() {
            const dividend = parseInt(document.getElementById('dividend').value);
            const divisor = parseInt(document.getElementById('divisor').value);

            if (isNaN(dividend) || isNaN(divisor) || dividend < 1 || divisor < 1) {
                showResult('longDivisionSteps', 'Please enter valid positive numbers', true);
                return;
            }

            const quotient = Math.floor(dividend / divisor);
            const remainder = dividend % divisor;
            
            let output = '<strong>Long Division Steps:</strong><br><br>';
            output += '<div style="font-family: monospace; font-size: 14px;">';
            output += `${quotient}<br>`;
            output += `${divisor} ) ${dividend}<br>`;
            
            // Show the work
            let currentDividend = dividend;
            let workingQuotient = quotient;
            
            if (quotient > 0) {
                const product = quotient * divisor;
                output += `     ${product}<br>`;
                output += `     ${'â”€'.repeat(Math.max(product.toString().length, remainder.toString().length))}<br>`;
                if (remainder > 0) {
                    output += `     ${remainder}<br>`;
                }
            }
            
            output += '</div><br>';
            
            output += '<strong>Step-by-step explanation:</strong><br>';
            output += `1. How many times does ${divisor} go into ${dividend}?<br>`;
            output += `2. ${divisor} Ã— ${quotient} = ${quotient * divisor}<br>`;
            output += `3. ${dividend} - ${quotient * divisor} = ${remainder}<br><br>`;
            
            if (remainder === 0) {
                output += `<strong>Final Answer: ${dividend} Ã· ${divisor} = ${quotient}</strong>`;
            } else {
                output += `<strong>Final Answer: ${dividend} Ã· ${divisor} = ${quotient} remainder ${remainder}</strong><br>`;
                output += `<em>Or as a mixed number: ${quotient} ${remainder}/${divisor}</em>`;
            }

            showResult('longDivisionSteps', output);
        }

        // DEDMAS Calculator
        function calculateDEDMAS() {
            const expression = document.getElementById('dedmasExpression').value.trim();

            if (!expression) {
                showResult('dedmasResult', 'Please enter a mathematical expression', true);
                return;
            }

            try {
                // Simple expression evaluator (basic implementation)
                // Note: In a real application, you'd want a more robust parser
                const sanitized = expression.replace(/[^0-9+\-*/().\s^]/g, '');
                
                // Replace ^ with ** for JavaScript exponentiation
                const jsExpression = sanitized.replace(/\^/g, '**');
                
                // Evaluate the expression
                const result = Function('"use strict"; return (' + jsExpression + ')')();
                
                let output = '<strong>DEDMAS Order of Operations:</strong><br>';
                output += '1. <strong>D</strong>ivision and <strong>E</strong>xponents<br>';
                output += '2. <strong>D</strong>ivision and <strong>M</strong>ultiplication (left to right)<br>';
                output += '3. <strong>A</strong>ddition and <strong>S</strong>ubtraction (left to right)<br><br>';
                output += `<strong>Expression:</strong> ${expression}<br>`;
                output += `<strong>Result:</strong> ${result}`;
                
                showResult('dedmasResult', output);
            } catch (error) {
                showResult('dedmasResult', 'Invalid expression. Please check your input and try again.', true);
            }
        }

        // Table Equation Finder
        function findTableEquation() {
            const tableData = document.getElementById('tableData').value.trim();

            if (!tableData) {
                showResult('tableEquationResult', 'Please enter x,y data pairs', true);
                return;
            }

            try {
                const lines = tableData.split('\n');
                const points = [];
                
                for (let line of lines) {
                    const [x, y] = line.split(',').map(val => parseFloat(val.trim()));
                    if (!isNaN(x) && !isNaN(y)) {
                        points.push({x, y});
                    }
                }
                
                if (points.length < 2) {
                    showResult('tableEquationResult', 'Please enter at least 2 valid data points', true);
                    return;
                }
                
                // Check if it's a linear relationship
                const slope = (points[1].y - points[0].y) / (points[1].x - points[0].x);
                const yIntercept = points[0].y - slope * points[0].x;
                
                // Verify linearity with all points
                let isLinear = true;
                for (let i = 2; i < points.length; i++) {
                    const expectedY = slope * points[i].x + yIntercept;
                    if (Math.abs(expectedY - points[i].y) > 0.001) {
                        isLinear = false;
                        break;
                    }
                }
                
                let output = '<strong>Table Analysis:</strong><br>';
                output += '<table style="margin: 10px 0;"><tr><th>x</th><th>y</th></tr>';
                for (let point of points) {
                    output += `<tr><td>${point.x}</td><td>${point.y}</td></tr>`;
                }
                output += '</table>';
                
                if (isLinear) {
                    const slopeStr = slope === 1 ? '' : slope === -1 ? '-' : slope.toString();
                    const interceptStr = yIntercept === 0 ? '' : yIntercept > 0 ? ` + ${yIntercept}` : ` - ${Math.abs(yIntercept)}`;
                    
                    output += `<strong>Linear Equation:</strong> y = ${slopeStr}x${interceptStr}<br>`;
                    output += `<strong>Slope:</strong> ${slope}<br>`;
                    output += `<strong>Y-intercept:</strong> ${yIntercept}`;
                } else {
                    output += '<strong>Result:</strong> The data does not follow a simple linear pattern.<br>';
                    output += 'The relationship may be quadratic, exponential, or another type of function.';
                }
                
                showResult('tableEquationResult', output);
            } catch (error) {
                showResult('tableEquationResult', 'Error processing data. Please check your input format.', true);
            }
        }

        // Fraction Addition
        function calculateFractionAddition() {
            const num1 = parseInt(document.getElementById('fracAddNum1').value);
            const den1 = parseInt(document.getElementById('fracAddDen1').value);
            const num2 = parseInt(document.getElementById('fracAddNum2').value);
            const den2 = parseInt(document.getElementById('fracAddDen2').value);

            if (isNaN(num1) || isNaN(den1) || isNaN(num2) || isNaN(den2) || den1 === 0 || den2 === 0) {
                showResult('fractionAddResult', 'Please enter valid numbers (denominators cannot be zero)', true);
                return;
            }

            const commonDen = lcm(Math.abs(den1), Math.abs(den2));
            const newNum1 = num1 * (commonDen / den1);
            const newNum2 = num2 * (commonDen / den2);
            const resultNum = newNum1 + newNum2;
            
            const [simplifiedNum, simplifiedDen] = simplifyFraction(resultNum, commonDen);
            
            let output = '<strong>Fraction Addition:</strong><br>';
            output += `${num1}/${den1} + ${num2}/${den2}<br><br>`;
            
            if (den1 !== den2) {
                output += `<strong>Step 1:</strong> Find common denominator<br>`;
                output += `LCM of ${den1} and ${den2} = ${commonDen}<br><br>`;
                output += `<strong>Step 2:</strong> Convert fractions<br>`;
                output += `${num1}/${den1} = ${newNum1}/${commonDen}<br>`;
                output += `${num2}/${den2} = ${newNum2}/${commonDen}<br><br>`;
                output += `<strong>Step 3:</strong> Add numerators<br>`;
                output += `${newNum1}/${commonDen} + ${newNum2}/${commonDen} = ${resultNum}/${commonDen}<br><br>`;
            } else {
                output += `<strong>Step 1:</strong> Add numerators (same denominator)<br>`;
                output += `${num1}/${den1} + ${num2}/${den2} = ${resultNum}/${commonDen}<br><br>`;
            }
            
            if (simplifiedNum !== resultNum || simplifiedDen !== commonDen) {
                output += `<strong>Step 4:</strong> Simplify<br>`;
                output += `${resultNum}/${commonDen} = ${simplifiedNum}/${simplifiedDen}`;
            } else {
                output += `<strong>Final Answer:</strong> ${simplifiedNum}/${simplifiedDen}`;
            }

            showResult('fractionAddResult', output);
        }

        // Fraction Subtraction
        function calculateFractionSubtraction() {
            const num1 = parseInt(document.getElementById('fracSubNum1').value);
            const den1 = parseInt(document.getElementById('fracSubDen1').value);
            const num2 = parseInt(document.getElementById('fracSubNum2').value);
            const den2 = parseInt(document.getElementById('fracSubDen2').value);

            if (isNaN(num1) || isNaN(den1) || isNaN(num2) || isNaN(den2) || den1 === 0 || den2 === 0) {
                showResult('fractionSubResult', 'Please enter valid numbers (denominators cannot be zero)', true);
                return;
            }

            const commonDen = lcm(Math.abs(den1), Math.abs(den2));
            const newNum1 = num1 * (commonDen / den1);
            const newNum2 = num2 * (commonDen / den2);
            const resultNum = newNum1 - newNum2;
            
            const [simplifiedNum, simplifiedDen] = simplifyFraction(resultNum, commonDen);
            
            let output = '<strong>Fraction Subtraction:</strong><br>';
            output += `${num1}/${den1} - ${num2}/${den2}<br><br>`;
            
            if (den1 !== den2) {
                output += `<strong>Step 1:</strong> Find common denominator<br>`;
                output += `LCM of ${den1} and ${den2} = ${commonDen}<br><br>`;
                output += `<strong>Step 2:</strong> Convert fractions<br>`;
                output += `${num1}/${den1} = ${newNum1}/${commonDen}<br>`;
                output += `${num2}/${den2} = ${newNum2}/${commonDen}<br><br>`;
                output += `<strong>Step 3:</strong> Subtract numerators<br>`;
                output += `${newNum1}/${commonDen} - ${newNum2}/${commonDen} = ${resultNum}/${commonDen}<br><br>`;
            } else {
                output += `<strong>Step 1:</strong> Subtract numerators (same denominator)<br>`;
                output += `${num1}/${den1} - ${num2}/${den2} = ${resultNum}/${commonDen}<br><br>`;
            }
            
            if (simplifiedNum !== resultNum || simplifiedDen !== commonDen) {
                output += `<strong>Step 2:</strong> Simplify<br>`;
                output += `${resultNum}/${commonDen} = ${simplifiedNum}/${simplifiedDen}`;
            } else {
                output += `<strong>Final Answer:</strong> ${simplifiedNum}/${simplifiedDen}`;
            }

            showResult('fractionSubResult', output);
        }

        // Fraction Multiplication
        function calculateFractionMultiplication() {
            const num1 = parseInt(document.getElementById('fracMultNum1').value);
            const den1 = parseInt(document.getElementById('fracMultDen1').value);
            const num2 = parseInt(document.getElementById('fracMultNum2').value);
            const den2 = parseInt(document.getElementById('fracMultDen2').value);

            if (isNaN(num1) || isNaN(den1) || isNaN(num2) || isNaN(den2) || den1 === 0 || den2 === 0) {
                showResult('fractionMultResult', 'Please enter valid numbers (denominators cannot be zero)', true);
                return;
            }

            const resultNum = num1 * num2;
            const resultDen = den1 * den2;
            
            const [simplifiedNum, simplifiedDen] = simplifyFraction(resultNum, resultDen);
            
            let output = '<strong>Fraction Multiplication:</strong><br>';
            output += `${num1}/${den1} Ã— ${num2}/${den2}<br><br>`;
            output += `<strong>Step 1:</strong> Multiply numerators and denominators<br>`;
            output += `(${num1} Ã— ${num2}) / (${den1} Ã— ${den2}) = ${resultNum}/${resultDen}<br><br>`;
            
            if (simplifiedNum !== resultNum || simplifiedDen !== resultDen) {
                output += `<strong>Step 2:</strong> Simplify<br>`;
                output += `${resultNum}/${resultDen} = ${simplifiedNum}/${simplifiedDen}`;
            } else {
                output += `<strong>Final Answer:</strong> ${simplifiedNum}/${simplifiedDen}`;
            }

            showResult('fractionMultResult', output);
        }

        // Fraction Division
        function calculateFractionDivision() {
            const num1 = parseInt(document.getElementById('fracDivNum1').value);
            const den1 = parseInt(document.getElementById('fracDivDen1').value);
            const num2 = parseInt(document.getElementById('fracDivNum2').value);
            const den2 = parseInt(document.getElementById('fracDivDen2').value);

            if (isNaN(num1) || isNaN(den1) || isNaN(num2) || isNaN(den2) || den1 === 0 || den2 === 0 || num2 === 0) {
                showResult('fractionDivResult', 'Please enter valid numbers (denominators and second numerator cannot be zero)', true);
                return;
            }

            // Division is multiplication by reciprocal
            const resultNum = num1 * den2;
            const resultDen = den1 * num2;
            
            const [simplifiedNum, simplifiedDen] = simplifyFraction(resultNum, resultDen);
            
            let output = '<strong>Fraction Division:</strong><br>';
            output += `${num1}/${den1} Ã· ${num2}/${den2}<br><br>`;
            output += `<strong>Step 1:</strong> Multiply by reciprocal<br>`;
            output += `${num1}/${den1} Ã— ${den2}/${num2}<br><br>`;
            output += `<strong>Step 2:</strong> Multiply numerators and denominators<br>`;
            output += `(${num1} Ã— ${den2}) / (${den1} Ã— ${num2}) = ${resultNum}/${resultDen}<br><br>`;
            
            if (simplifiedNum !== resultNum || simplifiedDen !== resultDen) {
                output += `<strong>Step 3:</strong> Simplify<br>`;
                output += `${resultNum}/${resultDen} = ${simplifiedNum}/${simplifiedDen}`;
            } else {
                output += `<strong>Final Answer:</strong> ${simplifiedNum}/${simplifiedDen}`;
            }

            showResult('fractionDivResult', output);
        }

        // Mixed Number Addition
        function calculateMixedAddition() {
            const whole1 = parseInt(document.getElementById('mixedAddWhole1').value) || 0;
            const num1 = parseInt(document.getElementById('mixedAddNum1').value) || 0;
            const den1 = parseInt(document.getElementById('mixedAddDen1').value) || 1;
            
            const whole2 = parseInt(document.getElementById('mixedAddWhole2').value) || 0;
            const num2 = parseInt(document.getElementById('mixedAddNum2').value) || 0;
            const den2 = parseInt(document.getElementById('mixedAddDen2').value) || 1;

            if (den1 === 0 || den2 === 0) {
                showResult('mixedAddResult', 'Error: Denominator cannot be zero', true);
                return;
            }

            // Convert to improper fractions
            const improper1 = whole1 * den1 + num1;
            const improper2 = whole2 * den2 + num2;

            // Find common denominator and add
            const commonDen = lcm(den1, den2);
            const newNum1 = improper1 * (commonDen / den1);
            const newNum2 = improper2 * (commonDen / den2);
            const resultNum = newNum1 + newNum2;

            // Convert back to mixed number
            const resultWhole = Math.floor(resultNum / commonDen);
            const resultFracNum = resultNum % commonDen;
            
            const [simplifiedNum, simplifiedDen] = simplifyFraction(resultFracNum, commonDen);

            let result = `<strong>Mixed Number Addition:</strong><br>`;
            result += `${whole1} ${num1}/${den1} + ${whole2} ${num2}/${den2}<br><br>`;
            result += `<strong>Result:</strong> `;
            
            if (resultWhole > 0 && simplifiedNum > 0) {
                result += `${resultWhole} ${simplifiedNum}/${simplifiedDen}`;
            } else if (resultWhole > 0) {
                result += `${resultWhole}`;
            } else if (simplifiedNum > 0) {
                result += `${simplifiedNum}/${simplifiedDen}`;
            } else {
                result += '0';
            }

            showResult('mixedAddResult', result);
        }

        // Mixed Number Multiplication
        function calculateMixedMultiplication() {
            const whole1 = parseInt(document.getElementById('mixedMultWhole1').value) || 0;
            const num1 = parseInt(document.getElementById('mixedMultNum1').value) || 0;
            const den1 = parseInt(document.getElementById('mixedMultDen1').value) || 1;
            
            const whole2 = parseInt(document.getElementById('mixedMultWhole2').value) || 0;
            const num2 = parseInt(document.getElementById('mixedMultNum2').value) || 0;
            const den2 = parseInt(document.getElementById('mixedMultDen2').value) || 1;

            if (den1 === 0 || den2 === 0) {
                showResult('mixedMultResult', 'Error: Denominator cannot be zero', true);
                return;
            }

            // Convert to improper fractions
            const improper1 = whole1 * den1 + num1;
            const improper2 = whole2 * den2 + num2;

            // Multiply fractions
            const resultNum = improper1 * improper2;
            const resultDen = den1 * den2;

            // Convert back to mixed number
            const resultWhole = Math.floor(resultNum / resultDen);
            const resultFracNum = resultNum % resultDen;
            
            const [simplifiedNum, simplifiedDen] = simplifyFraction(resultFracNum, resultDen);

            let result = `<strong>Mixed Number Multiplication:</strong><br>`;
            result += `${whole1} ${num1}/${den1} Ã— ${whole2} ${num2}/${den2}<br><br>`;
            result += `<strong>Result:</strong> `;
            
            if (resultWhole > 0 && simplifiedNum > 0) {
                result += `${resultWhole} ${simplifiedNum}/${simplifiedDen}`;
            } else if (resultWhole > 0) {
                result += `${resultWhole}`;
            } else if (simplifiedNum > 0) {
                result += `${simplifiedNum}/${simplifiedDen}`;
            } else {
                result += '0';
            }

            showResult('mixedMultResult', result);
        }

        // Mixed Number Division
        function calculateMixedDivision() {
            const whole1 = parseInt(document.getElementById('mixedDivWhole1').value) || 0;
            const num1 = parseInt(document.getElementById('mixedDivNum1').value) || 0;
            const den1 = parseInt(document.getElementById('mixedDivDen1').value) || 1;
            
            const whole2 = parseInt(document.getElementById('mixedDivWhole2').value) || 0;
            const num2 = parseInt(document.getElementById('mixedDivNum2').value) || 0;
            const den2 = parseInt(document.getElementById('mixedDivDen2').value) || 1;

            if (den1 === 0 || den2 === 0) {
                showResult('mixedDivResult', 'Error: Denominator cannot be zero', true);
                return;
            }

            // Convert to improper fractions
            const improper1 = whole1 * den1 + num1;
            const improper2 = whole2 * den2 + num2;

            if (improper2 === 0) {
                showResult('mixedDivResult', 'Error: Cannot divide by zero', true);
                return;
            }

            // Divide fractions (multiply by reciprocal)
            const resultNum = improper1 * den2;
            const resultDen = den1 * improper2;

            // Convert back to mixed number
            const resultWhole = Math.floor(Math.abs(resultNum) / Math.abs(resultDen));
            const resultFracNum = Math.abs(resultNum) % Math.abs(resultDen);
            
            const [simplifiedNum, simplifiedDen] = simplifyFraction(resultFracNum, Math.abs(resultDen));

            // Handle sign
            const isNegative = (resultNum < 0) !== (resultDen < 0);

            let result = `<strong>Mixed Number Division:</strong><br>`;
            result += `${whole1} ${num1}/${den1} Ã· ${whole2} ${num2}/${den2}<br><br>`;
            result += `<strong>Result:</strong> `;
            
            const sign = isNegative ? '-' : '';
            
            if (resultWhole > 0 && simplifiedNum > 0) {
                result += `${sign}${resultWhole} ${simplifiedNum}/${simplifiedDen}`;
            } else if (resultWhole > 0) {
                result += `${sign}${resultWhole}`;
            } else if (simplifiedNum > 0) {
                result += `${sign}${simplifiedNum}/${simplifiedDen}`;
            } else {
                result += '0';
            }

            showResult('mixedDivResult', result);
        }

        // Number Line
        function drawNumberLine() {
            const start = parseInt(document.getElementById('numberLineStart').value);
            const end = parseInt(document.getElementById('numberLineEnd').value);
            const mark = parseFloat(document.getElementById('numberLineMark').value);

            if (isNaN(start) || isNaN(end) || start >= end) {
                showResult('numberLineResult', 'Please enter valid start and end values (start < end)', true);
                return;
            }

            const canvas = document.getElementById('numberLineCanvas');
            const ctx = canvas.getContext('2d');
            canvas.style.display = 'block';
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const margin = 50;
            const lineY = canvas.height / 2;
            const lineStart = margin;
            const lineEnd = canvas.width - margin;
            const range = end - start;
            const scale = (lineEnd - lineStart) / range;
            
            // Draw main line
            ctx.beginPath();
            ctx.moveTo(lineStart, lineY);
            ctx.lineTo(lineEnd, lineY);
            ctx.strokeStyle = '#495057';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Draw tick marks and labels
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillStyle = '#495057';
            
            for (let i = start; i <= end; i++) {
                const x = lineStart + (i - start) * scale;
                
                // Tick mark
                ctx.beginPath();
                ctx.moveTo(x, lineY - 10);
                ctx.lineTo(x, lineY + 10);
                ctx.stroke();
                
                // Label
                ctx.fillText(i.toString(), x, lineY + 25);
            }
            
            // Mark special point if provided
            if (!isNaN(mark) && mark >= start && mark <= end) {
                const markX = lineStart + (mark - start) * scale;
                
                ctx.beginPath();
                ctx.arc(markX, lineY, 6, 0, 2 * Math.PI);
                ctx.fillStyle = '#4facfe';
                ctx.fill();
                ctx.strokeStyle = '#495057';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // Label for marked point
                ctx.fillStyle = '#4facfe';
                ctx.font = 'bold 14px Arial';
                ctx.fillText(mark.toString(), markX, lineY - 20);
            }
        }

        // Line Graph
        function drawLineGraph() {
            const data = document.getElementById('lineGraphData').value.trim();
            const title = document.getElementById('lineGraphTitle').value || 'Line Graph';

            if (!data) {
                showResult('lineGraphResult', 'Please enter data points', true);
                return;
            }

            try {
                const lines = data.split('\n');
                const points = [];
                
                for (let line of lines) {
                    const [x, y] = line.split(',').map(val => parseFloat(val.trim()));
                    if (!isNaN(x) && !isNaN(y)) {
                        points.push({x, y});
                    }
                }
                
                if (points.length < 2) {
                    showResult('lineGraphResult', 'Please enter at least 2 valid data points', true);
                    return;
                }

                const canvas = document.getElementById('lineGraphCanvas');
                const ctx = canvas.getContext('2d');
                canvas.style.display = 'block';
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Find data ranges
                const xValues = points.map(p => p.x);
                const yValues = points.map(p => p.y);
                const minX = Math.min(...xValues);
                const maxX = Math.max(...xValues);
                const minY = Math.min(...yValues);
                const maxY = Math.max(...yValues);
                
                const margin = 60;
                const graphWidth = canvas.width - 2 * margin;
                const graphHeight = canvas.height - 2 * margin;
                
                // Scale functions
                const scaleX = (x) => margin + ((x - minX) / (maxX - minX)) * graphWidth;
                const scaleY = (y) => canvas.height - margin - ((y - minY) / (maxY - minY)) * graphHeight;
                
                // Draw axes
                ctx.strokeStyle = '#495057';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(margin, margin);
                ctx.lineTo(margin, canvas.height - margin);
                ctx.lineTo(canvas.width - margin, canvas.height - margin);
                ctx.stroke();
                
                // Draw grid lines
                ctx.strokeStyle = '#e9ecef';
                ctx.lineWidth = 1;
                for (let i = 0; i <= 10; i++) {
                    const x = margin + (i / 10) * graphWidth;
                    const y = margin + (i / 10) * graphHeight;
                    
                    ctx.beginPath();
                    ctx.moveTo(x, margin);
                    ctx.lineTo(x, canvas.height - margin);
                    ctx.stroke();
                    
                    ctx.beginPath();
                    ctx.moveTo(margin, y);
                    ctx.lineTo(canvas.width - margin, y);
                    ctx.stroke();
                }
                
                // Draw line
                ctx.strokeStyle = '#4facfe';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(scaleX(points[0].x), scaleY(points[0].y));
                for (let i = 1; i < points.length; i++) {
                    ctx.lineTo(scaleX(points[i].x), scaleY(points[i].y));
                }
                ctx.stroke();
                
                // Draw points
                ctx.fillStyle = '#4facfe';
                for (let point of points) {
                    ctx.beginPath();
                    ctx.arc(scaleX(point.x), scaleY(point.y), 4, 0, 2 * Math.PI);
                    ctx.fill();
                }
                
                // Labels
                ctx.fillStyle = '#495057';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(title, canvas.width / 2, 30);
                
                // Axis labels
                ctx.font = '12px Arial';
                ctx.fillText('X', canvas.width - 20, canvas.height - margin + 15);
                ctx.save();
                ctx.translate(20, canvas.height / 2);
                ctx.rotate(-Math.PI / 2);
                ctx.fillText('Y', 0, 0);
                ctx.restore();
                
            } catch (error) {
                showResult('lineGraphResult', 'Error creating graph. Please check your data format.', true);
            }
        }

        // Bar Graph
        function drawBarGraph() {
            const data = document.getElementById('barGraphData').value.trim();
            const title = document.getElementById('barGraphTitle').value || 'Bar Chart';

            if (!data) {
                return;
            }

            try {
                const lines = data.split('\n');
                const dataPoints = [];
                
                for (let line of lines) {
                    const [label, value] = line.split(',');
                    const numValue = parseFloat(value.trim());
                    if (label && !isNaN(numValue)) {
                        dataPoints.push({label: label.trim(), value: numValue});
                    }
                }
                
                if (dataPoints.length === 0) {
                    return;
                }

                const canvas = document.getElementById('barGraphCanvas');
                const ctx = canvas.getContext('2d');
                canvas.style.display = 'block';
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                const margin = 60;
                const graphWidth = canvas.width - 2 * margin;
                const graphHeight = canvas.height - 2 * margin;
                const barWidth = graphWidth / dataPoints.length * 0.8;
                const barSpacing = graphWidth / dataPoints.length * 0.2;
                
                const maxValue = Math.max(...dataPoints.map(d => d.value));
                const scale = graphHeight / maxValue;
                
                // Draw axes
                ctx.strokeStyle = '#495057';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(margin, margin);
                ctx.lineTo(margin, canvas.height - margin);
                ctx.lineTo(canvas.width - margin, canvas.height - margin);
                ctx.stroke();
                
                // Draw bars
                const colors = ['#4facfe', '#00f2fe', '#667eea', '#764ba2', '#f093fb', '#f5576c'];
                
                for (let i = 0; i < dataPoints.length; i++) {
                    const x = margin + i * (barWidth + barSpacing) + barSpacing / 2;
                    const barHeight = dataPoints[i].value * scale;
                    const y = canvas.height - margin - barHeight;
                    
                    ctx.fillStyle = colors[i % colors.length];
                    ctx.fillRect(x, y, barWidth, barHeight);
                    
                    // Value labels on bars
                    ctx.fillStyle = '#495057';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(dataPoints[i].value.toString(), x + barWidth / 2, y - 5);
                    
                    // Category labels
                    ctx.save();
                    ctx.translate(x + barWidth / 2, canvas.height - margin + 15);
                    ctx.rotate(-Math.PI / 4);
                    ctx.fillText(dataPoints[i].label, 0, 0);
                    ctx.restore();
                }
                
                // Title
                ctx.fillStyle = '#495057';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(title, canvas.width / 2, 30);
                
            } catch (error) {
                console.error('Error creating bar graph:', error);
            }
        }

        // Pictograph
        function drawPictograph() {
            const data = document.getElementById('pictographData').value.trim();
            const scale = parseInt(document.getElementById('pictographScale').value) || 5;
            const title = document.getElementById('pictographTitle').value || 'Pictograph';

            if (!data) {
                return;
            }

            try {
                const lines = data.split('\n');
                const dataPoints = [];
                
                for (let line of lines) {
                    const [label, value] = line.split(',');
                    const numValue = parseFloat(value.trim());
                    if (label && !isNaN(numValue)) {
                        dataPoints.push({label: label.trim(), value: numValue});
                    }
                }
                
                if (dataPoints.length === 0) {
                    return;
                }

                let output = `<h4>${title}</h4>`;
                output += `<p><em>Each symbol (â˜…) represents ${scale} units</em></p>`;
                output += '<div style="font-family: monospace; font-size: 16px; line-height: 1.8;">';
                
                for (let dataPoint of dataPoints) {
                    const fullSymbols = Math.floor(dataPoint.value / scale);
                    const remainder = dataPoint.value % scale;
                    const partialSymbol = remainder > 0 ? 'â˜†' : '';
                    
                    output += `<div style="margin: 10px 0;">`;
                    output += `<strong>${dataPoint.label}:</strong> `;
                    output += 'â˜…'.repeat(fullSymbols);
                    output += partialSymbol;
                    output += ` (${dataPoint.value})`;
                    output += `</div>`;
                }
                
                output += '</div>';
                
                document.getElementById('pictographResult').innerHTML = output;
                document.getElementById('pictographResult').style.display = 'block';
                
            } catch (error) {
                console.error('Error creating pictograph:', error);
            }
        }

        // Stem and Leaf Plot
        function createStemLeafPlot() {
            const data = document.getElementById('stemLeafData').value.trim();

            if (!data) {
                showResult('stemLeafResult', 'Please enter data values', true);
                return;
            }

            try {
                const values = data.split(',').map(val => parseInt(val.trim())).filter(val => !isNaN(val)).sort((a, b) => a - b);
                
                if (values.length === 0) {
                    showResult('stemLeafResult', 'Please enter valid numeric data', true);
                    return;
                }

                const stemLeaf = {};
                
                for (let value of values) {
                    const stem = Math.floor(value / 10);
                    const leaf = value % 10;
                    
                    if (!stemLeaf[stem]) {
                        stemLeaf[stem] = [];
                    }
                    stemLeaf[stem].push(leaf);
                }
                
                // Sort leaves for each stem
                for (let stem in stemLeaf) {
                    stemLeaf[stem].sort((a, b) => a - b);
                }
                
                let output = '<strong>Stem and Leaf Plot:</strong><br><br>';
                output += '<div style="font-family: monospace; font-size: 14px;">';
                output += 'Stem | Leaf<br>';
                output += 'â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€<br>';
                
                const stems = Object.keys(stemLeaf).map(s => parseInt(s)).sort((a, b) => a - b);
                
                for (let stem of stems) {
                    const leaves = stemLeaf[stem].join(' ');
                    output += `${stem.toString().padStart(4, ' ')} â”‚ ${leaves}<br>`;
                }
                
                output += '</div><br>';
                output += `<strong>Key:</strong> 2â”‚3 means 23<br>`;
                output += `<strong>Data Count:</strong> ${values.length} values<br>`;
                output += `<strong>Range:</strong> ${Math.min(...values)} to ${Math.max(...values)}`;

                showResult('stemLeafResult', output);
                
            } catch (error) {
                showResult('stemLeafResult', 'Error processing data. Please check your input format.', true);
            }
        }

        // US Currency Calculator
        function calculateUSCurrency() {
            const pennies = parseInt(document.getElementById('pennies').value) || 0;
            const nickels = parseInt(document.getElementById('nickels').value) || 0;
            const dimes = parseInt(document.getElementById('dimes').value) || 0;
            const quarters = parseInt(document.getElementById('quarters').value) || 0;
            const dollars = parseInt(document.getElementById('dollars').value) || 0;

            const totalCents = pennies * 1 + nickels * 5 + dimes * 10 + quarters * 25 + dollars * 100;
            const totalDollars = totalCents / 100;

            let output = '<strong>US Currency Calculation:</strong><br><br>';
            output += `${pennies} pennies = ${pennies * 1}Â¢<br>`;
            output += `${nickels} nickels = ${nickels * 5}Â¢<br>`;
            output += `${dimes} dimes = ${dimes * 10}Â¢<br>`;
            output += `${quarters} quarters = ${quarters * 25}Â¢<br>`;
            output += `${dollars} dollars = ${dollars * 100}Â¢<br>`;
            output += `<hr style="margin: 10px 0;">`;
            output += `<strong>Total: ${totalCents}Â¢ = $${totalDollars.toFixed(2)}</strong>`;

            showResult('usCurrencyResult', output);
        }

        // Canadian Currency Calculator
        function calculateCanadianCurrency() {
            const pennies = parseInt(document.getElementById('canPennies').value) || 0;
            const nickels = parseInt(document.getElementById('canNickels').value) || 0;
            const dimes = parseInt(document.getElementById('canDimes').value) || 0;
            const quarters = parseInt(document.getElementById('canQuarters').value) || 0;
            const loonies = parseInt(document.getElementById('loonies').value) || 0;
            const toonies = parseInt(document.getElementById('toonies').value) || 0;

            const totalCents = pennies * 1 + nickels * 5 + dimes * 10 + quarters * 25 + loonies * 100 + toonies * 200;
            const totalDollars = totalCents / 100;

            let output = '<strong>Canadian Currency Calculation:</strong><br><br>';
            output += `${pennies} pennies = ${pennies * 1}Â¢ <em>(discontinued)</em><br>`;
            output += `${nickels} nickels = ${nickels * 5}Â¢<br>`;
            output += `${dimes} dimes = ${dimes * 10}Â¢<br>`;
            output += `${quarters} quarters = ${quarters * 25}Â¢<br>`;
            output += `${loonies} loonies = ${loonies * 100}Â¢<br>`;
            output += `${toonies} toonies = ${toonies * 200}Â¢<br>`;
            output += `<hr style="margin: 10px 0;">`;
            output += `<strong>Total: ${totalCents}Â¢ = $${totalDollars.toFixed(2)} CAD</strong>`;

            showResult('canCurrencyResult', output);
        }

        // Graphing Calculator
        function drawFunctionGraph() {
            const func = document.getElementById('graphFunction').value.trim();
            const xMin = parseFloat(document.getElementById('graphXMin').value);
            const xMax = parseFloat(document.getElementById('graphXMax').value);
            const yMin = parseFloat(document.getElementById('graphYMin').value);
            const yMax = parseFloat(document.getElementById('graphYMax').value);

            if (!func || isNaN(xMin) || isNaN(xMax) || isNaN(yMin) || isNaN(yMax)) {
                return;
            }

            const canvas = document.getElementById('functionGraphCanvas');
            const ctx = canvas.getContext('2d');
            canvas.style.display = 'block';
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const margin = 40;
            const graphWidth = canvas.width - 2 * margin;
            const graphHeight = canvas.height - 2 * margin;
            
            // Scale functions
            const scaleX = (x) => margin + ((x - xMin) / (xMax - xMin)) * graphWidth;
            const scaleY = (y) => canvas.height - margin - ((y - yMin) / (yMax - yMin)) * graphHeight;
            
            // Draw grid
            ctx.strokeStyle = '#e9ecef';
            ctx.lineWidth = 1;
            
            // Vertical grid lines
            for (let x = Math.ceil(xMin); x <= Math.floor(xMax); x++) {
                const screenX = scaleX(x);
                ctx.beginPath();
                ctx.moveTo(screenX, margin);
                ctx.lineTo(screenX, canvas.height - margin);
                ctx.stroke();
            }
            
            // Horizontal grid lines
            for (let y = Math.ceil(yMin); y <= Math.floor(yMax); y++) {
                const screenY = scaleY(y);
                ctx.beginPath();
                ctx.moveTo(margin, screenY);
                ctx.lineTo(canvas.width - margin, screenY);
                ctx.stroke();
            }
            
            // Draw axes
            ctx.strokeStyle = '#495057';
            ctx.lineWidth = 2;
            
            // Y-axis
            if (xMin <= 0 && xMax >= 0) {
                const xAxisX = scaleX(0);
                ctx.beginPath();
                ctx.moveTo(xAxisX, margin);
                ctx.lineTo(xAxisX, canvas.height - margin);
                ctx.stroke();
            }
            
            // X-axis
            if (yMin <= 0 && yMax >= 0) {
                const yAxisY = scaleY(0);
                ctx.beginPath();
                ctx.moveTo(margin, yAxisY);
                ctx.lineTo(canvas.width - margin, yAxisY);
                ctx.stroke();
            }
            
            // Draw function
            try {
                ctx.strokeStyle = '#4facfe';
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                let firstPoint = true;
                const step = (xMax - xMin) / 1000;
                
                for (let x = xMin; x <= xMax; x += step) {
                    try {
                        // Simple function evaluator (replace common math functions)
                        let expression = func.replace(/x/g, `(${x})`);
                        expression = expression.replace(/sin/g, 'Math.sin');
                        expression = expression.replace(/cos/g, 'Math.cos');
                        expression = expression.replace(/tan/g, 'Math.tan');
                        expression = expression.replace(/log/g, 'Math.log');
                        expression = expression.replace(/sqrt/g, 'Math.sqrt');
                        expression = expression.replace(/\^/g, '**');
                        
                        const y = Function('"use strict"; return (' + expression + ')')();
                        
                        if (isFinite(y) && y >= yMin && y <= yMax) {
                            const screenX = scaleX(x);
                            const screenY = scaleY(y);
                            
                            if (firstPoint) {
                                ctx.moveTo(screenX, screenY);
                                firstPoint = false;
                            } else {
                                ctx.lineTo(screenX, screenY);
                            }
                        } else {
                            firstPoint = true;
                        }
                    } catch (e) {
                        firstPoint = true;
                    }
                }
                
                ctx.stroke();
                
            } catch (error) {
                ctx.fillStyle = '#dc3545';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Invalid function', canvas.width / 2, canvas.height / 2);
            }
            
            // Labels
            ctx.fillStyle = '#495057';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`f(x) = ${func}`, canvas.width / 2, 20);
        }

        // Shape Transformation Tool
        function applyTransformation() {
            const type = document.getElementById('transformationType').value;
            
            // This would be a complex implementation
            // For now, show a placeholder
            const canvas = document.getElementById('transformationCanvas');
            const ctx = canvas.getContext('2d');
            canvas.style.display = 'block';
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#495057';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`${type.charAt(0).toUpperCase() + type.slice(1)} Transformation`, canvas.width / 2, canvas.height / 2);
            ctx.fillText('Interactive transformation tool coming soon!', canvas.width / 2, canvas.height / 2 + 30);
        }

        // Base Ten Blocks
        function showBaseTenBlocks() {
            const number = parseInt(document.getElementById('baseTenNumber').value);

            if (isNaN(number) || number < 0 || number > 9999) {
                showResult('baseTenResult', 'Please enter a number between 0 and 9999', true);
                return;
            }

            const thousands = Math.floor(number / 1000);
            const hundreds = Math.floor((number % 1000) / 100);
            const tens = Math.floor((number % 100) / 10);
            const ones = number % 10;

            let output = `<strong>Base Ten Blocks for ${number}:</strong><br><br>`;
            
            if (thousands > 0) {
                output += `<div style="margin: 10px 0;">`;
                output += `<strong>Thousands (1000s):</strong> ${thousands}<br>`;
                output += `<div style="display: inline-block; margin: 5px;">`;
                for (let i = 0; i < thousands; i++) {
                    output += `<div style="display: inline-block; width: 40px; height: 40px; background: #4facfe; border: 2px solid #495057; margin: 2px; text-align: center; line-height: 36px; color: white; font-weight: bold;">1000</div>`;
                }
                output += `</div></div>`;
            }
            
            if (hundreds > 0) {
                output += `<div style="margin: 10px 0;">`;
                output += `<strong>Hundreds (100s):</strong> ${hundreds}<br>`;
                output += `<div style="display: inline-block; margin: 5px;">`;
                for (let i = 0; i < hundreds; i++) {
                    output += `<div style="display: inline-block; width: 30px; height: 30px; background: #00f2fe; border: 2px solid #495057; margin: 2px; text-align: center; line-height: 26px; color: white; font-weight: bold; font-size: 10px;">100</div>`;
                }
                output += `</div></div>`;
            }
            
            if (tens > 0) {
                output += `<div style="margin: 10px 0;">`;
                output += `<strong>Tens (10s):</strong> ${tens}<br>`;
                output += `<div style="display: inline-block; margin: 5px;">`;
                for (let i = 0; i < tens; i++) {
                    output += `<div style="display: inline-block; width: 60px; height: 6px; background: #667eea; border: 1px solid #495057; margin: 2px;"></div>`;
                }
                output += `</div></div>`;
            }
            
            if (ones > 0) {
                output += `<div style="margin: 10px 0;">`;
                output += `<strong>Ones (1s):</strong> ${ones}<br>`;
                output += `<div style="display: inline-block; margin: 5px;">`;
                for (let i = 0; i < ones; i++) {
                    output += `<div style="display: inline-block; width: 6px; height: 6px; background: #764ba2; border: 1px solid #495057; margin: 2px;"></div>`;
                }
                output += `</div></div>`;
            }
            
            output += `<br><strong>Total:</strong> ${thousands} thousands + ${hundreds} hundreds + ${tens} tens + ${ones} ones = ${number}`;

            document.getElementById('baseTenResult').innerHTML = output;
            document.getElementById('baseTenResult').style.display = 'block';
        }

        // Algebra Tiles
        function showAlgebraTiles() {
            const expression = document.getElementById('algebraExpression').value.trim();

            if (!expression) {
                showResult('algebraTilesResult', 'Please enter an algebraic expression', true);
                return;
            }

            // Simple parser for basic expressions like "2x + 3" or "x^2 + 2x + 1"
            let output = `<strong>Algebra Tiles for: ${expression}</strong><br><br>`;
            
            // This is a simplified representation
            output += `<div style="margin: 20px 0;">`;
            
            // Parse basic terms (this is a simplified implementation)
            const terms = expression.split(/[\+\-]/).map(term => term.trim()).filter(term => term);
            const signs = expression.match(/[\+\-]/g) || [];
            
            let termIndex = 0;
            for (let i = 0; i < terms.length; i++) {
                const term = terms[i];
                const sign = i === 0 ? '+' : signs[i - 1];
                
                if (term.includes('x^2') || term.includes('xÂ²')) {
                    const coeff = term.replace(/x\^?2?Â²?/, '') || '1';
                    const count = parseInt(coeff) || 1;
                    output += `<div style="margin: 10px 0;"><strong>${sign}${coeff}xÂ²:</strong><br>`;
                    for (let j = 0; j < Math.abs(count); j++) {
                        const color = sign === '+' ? '#4facfe' : '#ff6b6b';
                        output += `<div style="display: inline-block; width: 40px; height: 40px; background: ${color}; border: 2px solid #495057; margin: 2px; text-align: center; line-height: 36px; color: white; font-weight: bold; font-size: 10px;">xÂ²</div>`;
                    }
                    output += `</div>`;
                } else if (term.includes('x')) {
                    const coeff = term.replace('x', '') || '1';
                    const count = parseInt(coeff) || 1;
                    output += `<div style="margin: 10px 0;"><strong>${sign}${coeff}x:</strong><br>`;
                    for (let j = 0; j < Math.abs(count); j++) {
                        const color = sign === '+' ? '#00f2fe' : '#ff8a80';
                        output += `<div style="display: inline-block; width: 30px; height: 6px; background: ${color}; border: 1px solid #495057; margin: 2px;"></div>`;
                    }
                    output += `</div>`;
                } else {
                    const count = parseInt(term) || 0;
                    if (count !== 0) {
                        output += `<div style="margin: 10px 0;"><strong>${sign}${count}:</strong><br>`;
                        for (let j = 0; j < Math.abs(count); j++) {
                            const color = sign === '+' ? '#667eea' : '#ffab91';
                            output += `<div style="display: inline-block; width: 6px; height: 6px; background: ${color}; border: 1px solid #495057; margin: 2px;"></div>`;
                        }
                        output += `</div>`;
                    }
                }
            }
            
            output += `</div>`;
            output += `<p><em>Blue tiles represent positive terms, red/orange tiles represent negative terms.</em></p>`;

            document.getElementById('algebraTilesResult').innerHTML = output;
            document.getElementById('algebraTilesResult').style.display = 'block';
        }

        // Analog Clock
        function showAnalogClock() {
            const hour = parseInt(document.getElementById('clockHour').value);
            const minute = parseInt(document.getElementById('clockMinute').value);

            if (isNaN(hour) || isNaN(minute) || hour < 1 || hour > 12 || minute < 0 || minute > 59) {
                return;
            }

            const clock = document.getElementById('analogClock');
            const hourHand = document.getElementById('hourHand');
            const minuteHand = document.getElementById('minuteHand');
            
            clock.style.display = 'block';
            
            // Calculate angles
            const minuteAngle = minute * 6; // 360 degrees / 60 minutes = 6 degrees per minute
            const hourAngle = (hour % 12) * 30 + minute * 0.5; // 30 degrees per hour + minute adjustment
            
            // Apply rotations
            hourHand.style.transform = `rotate(${hourAngle}deg)`;
            minuteHand.style.transform = `rotate(${minuteAngle}deg)`;
            
            // Add hour markers
            let markers = clock.querySelector('.hour-markers');
            if (!markers) {
                markers = document.createElement('div');
                markers.className = 'hour-markers';
                for (let i = 1; i <= 12; i++) {
                    const marker = document.createElement('div');
                    marker.style.position = 'absolute';
                    marker.style.width = '2px';
                    marker.style.height = '20px';
                    marker.style.background = '#495057';
                    marker.style.left = '50%';
                    marker.style.top = '10px';
                    marker.style.transformOrigin = '1px 90px';
                    marker.style.transform = `translateX(-50%) rotate(${i * 30}deg)`;
                    markers.appendChild(marker);
                    
                    // Add numbers
                    const number = document.createElement('div');
                    number.style.position = 'absolute';
                    number.style.width = '20px';
                    number.style.height = '20px';
                    number.style.left = '50%';
                    number.style.top = '15px';
                    number.style.transformOrigin = '10px 85px';
                    number.style.transform = `translateX(-50%) rotate(${i * 30}deg)`;
                    number.style.display = 'flex';
                    number.style.alignItems = 'center';
                    number.style.justifyContent = 'center';
                    number.style.fontSize = '12px';
                    number.style.fontWeight = 'bold';
                    number.innerHTML = `<span style="transform: rotate(${-i * 30}deg)">${i}</span>`;
                    markers.appendChild(number);
                }
                clock.appendChild(markers);
            }
        }

        // Probability Spinner
        function spinSpinner() {
            const sections = parseInt(document.getElementById('spinnerSections').value);
            const spinner = document.getElementById('probabilitySpinner');
            const arrow = document.getElementById('spinnerArrow');
            
            // Generate random spin (multiple rotations + final position)
            const spins = Math.floor(Math.random() * 5) + 3; // 3-7 full rotations
            const finalAngle = Math.random() * 360;
            const totalRotation = spins * 360 + finalAngle;
            
            arrow.style.transform = `rotate(${totalRotation}deg)`;
            
            // Determine result
            const sectionAngle = 360 / sections;
            const resultSection = Math.floor(finalAngle / sectionAngle) + 1;
            
            // Update spinner colors based on sections
            const colors = ['red', 'blue', 'green', 'yellow', 'orange', 'purple', 'pink', 'cyan'];
            let gradient = 'conic-gradient(';
            for (let i = 0; i < sections; i++) {
                const startAngle = i * sectionAngle;
                const endAngle = (i + 1) * sectionAngle;
                gradient += `${colors[i % colors.length]} ${startAngle}deg ${endAngle}deg`;
                if (i < sections - 1) gradient += ', ';
            }
            gradient += ')';
            spinner.style.background = gradient;
            
            setTimeout(() => {
                showResult('spinnerResult', `<strong>Result:</strong> Section ${resultSection} (${colors[(resultSection - 1) % colors.length]})`);
            }, 2000);
        }

        // Dice Roller
        function rollDice() {
            const numberOfDice = parseInt(document.getElementById('numberOfDice').value);
            const container = document.getElementById('diceContainer');
            
            container.innerHTML = '';
            let total = 0;
            const results = [];
            
            for (let i = 0; i < numberOfDice; i++) {
                const result = Math.floor(Math.random() * 6) + 1;
                results.push(result);
                total += result;
                
                const die = document.createElement('div');
                die.className = 'dice';
                die.textContent = result;
                
                // Add animation
                die.style.animation = 'none';
                setTimeout(() => {
                    die.style.animation = 'bounce 0.5s ease-out';
                }, i * 100);
                
                container.appendChild(die);
            }
            
            let resultText = `<strong>Results:</strong> ${results.join(', ')}<br>`;
            resultText += `<strong>Total:</strong> ${total}`;
            if (numberOfDice > 1) {
                resultText += `<br><strong>Average:</strong> ${(total / numberOfDice).toFixed(2)}`;
            }
            
            showResult('diceResult', resultText);
        }

        // Fraction Strips
        function showFractionStrips() {
            const numerator = parseInt(document.getElementById('stripNumerator').value);
            const denominator = parseInt(document.getElementById('stripDenominator').value);

            if (isNaN(numerator) || isNaN(denominator) || denominator <= 0 || numerator < 0) {
                showResult('fractionStripsResult', 'Please enter valid numbers', true);
                return;
            }

            let output = `<strong>Fraction Strips: ${numerator}/${denominator}</strong><br><br>`;
            
            // Whole strip for reference
            output += `<div style="margin: 20px 0;">`;
            output += `<div style="margin-bottom: 10px;"><strong>Whole (1):</strong></div>`;
            output += `<div class="fraction-strip" style="background: #e9ecef;"></div>`;
            output += `</div>`;
            
            // Fraction strip
            output += `<div style="margin: 20px 0;">`;
            output += `<div style="margin-bottom: 10px;"><strong>${numerator}/${denominator}:</strong></div>`;
            output += `<div class="fraction-strip">`;
            
            for (let i = 0; i < denominator; i++) {
                const isShaded = i < numerator;
                const partWidth = 200 / denominator;
                output += `<div style="width: ${partWidth}px; height: 40px; background: ${isShaded ? '#4facfe' : '#f8f9fa'}; border-right: 1px solid #495057; display: flex; align-items: center; justify-content: center; font-size: 10px;">${isShaded ? 'â– ' : ''}</div>`;
            }
            
            output += `</div></div>`;
            
            // Decimal equivalent
            const decimal = (numerator / denominator).toFixed(3);
            output += `<p><strong>Decimal equivalent:</strong> ${decimal}</p>`;
            output += `<p><strong>Percentage:</strong> ${(numerator / denominator * 100).toFixed(1)}%</p>`;

            document.getElementById('fractionStripsResult').innerHTML = output;
            document.getElementById('fractionStripsResult').style.display = 'block';
        }

        // Fraction Circles
        function showFractionCircles() {
            const numerator = parseInt(document.getElementById('circleNumerator').value);
            const denominator = parseInt(document.getElementById('circleDenominator').value);

            if (isNaN(numerator) || isNaN(denominator) || denominator <= 0 || numerator < 0) {
                return;
            }

            const canvas = document.getElementById('fractionCircleCanvas');
            const ctx = canvas.getContext('2d');
            canvas.style.display = 'block';
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const centerX = 100;
            const centerY = 100;
            const radius = 80;
            
            // Draw whole circle outline
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = '#495057';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Draw sections
            const sectionAngle = (2 * Math.PI) / denominator;
            
            for (let i = 0; i < denominator; i++) {
                const startAngle = i * sectionAngle - Math.PI / 2; // Start from top
                const endAngle = (i + 1) * sectionAngle - Math.PI / 2;
                
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, startAngle, endAngle);
                ctx.closePath();
                
                if (i < numerator) {
                    ctx.fillStyle = '#4facfe';
                    ctx.fill();
                }
                
                ctx.strokeStyle = '#495057';
                ctx.lineWidth = 1;
                ctx.stroke();
            }
            
            // Labels
            ctx.fillStyle = '#495057';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`${numerator}/${denominator}`, centerX, centerY + 5);
            
            // Second circle showing decimal
            const centerX2 = 300;
            const decimal = numerator / denominator;
            
            ctx.beginPath();
            ctx.arc(centerX2, centerY, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = '#495057';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Fill based on decimal
            ctx.beginPath();
            ctx.moveTo(centerX2, centerY);
            ctx.arc(centerX2, centerY, radius, -Math.PI / 2, -Math.PI / 2 + 2 * Math.PI * decimal);
            ctx.closePath();
            ctx.fillStyle = '#00f2fe';
            ctx.fill();
            
            ctx.fillStyle = '#495057';
            ctx.font = '14px Arial';
            ctx.fillText(`${decimal.toFixed(3)}`, centerX2, centerY + 5);
            ctx.fillText(`${(decimal * 100).toFixed(1)}%`, centerX2, centerY + 25);
        }

        // Multiplication Array
        function showMultiplicationArray() {
            const rows = parseInt(document.getElementById('arrayRows').value);
            const columns = parseInt(document.getElementById('arrayColumns').value);

            if (isNaN(rows) || isNaN(columns) || rows <= 0 || columns <= 0 || rows > 12 || columns > 12) {
                showResult('multiplicationArrayResult', 'Please enter valid numbers between 1 and 12', true);
                return;
            }

            let output = `<strong>Multiplication Array: ${rows} Ã— ${columns} = ${rows * columns}</strong><br><br>`;
            
            output += `<div class="array-grid" style="grid-template-columns: repeat(${columns}, 1fr); grid-template-rows: repeat(${rows}, 1fr);">`;
            
            for (let i = 0; i < rows * columns; i++) {
                output += `<div class="array-cell filled"></div>`;
            }
            
            output += `</div>`;
            
            output += `<br><p><strong>This shows:</strong> ${rows} rows of ${columns} = ${rows * columns}</p>`;
            output += `<p><strong>Or:</strong> ${columns} columns of ${rows} = ${rows * columns}</p>`;

            document.getElementById('multiplicationArrayResult').innerHTML = output;
            document.getElementById('multiplicationArrayResult').style.display = 'block';
        }

        // Ten Frame
        function showTenFrame() {
            const number = parseInt(document.getElementById('tenFrameNumber').value);

            if (isNaN(number) || number < 0 || number > 10) {
                return;
            }

            const container = document.getElementById('tenFrameContainer');
            const grid = document.getElementById('tenFrameGrid');
            
            grid.innerHTML = '';
            
            for (let i = 0; i < 10; i++) {
                const cell = document.createElement('div');
                cell.className = 'ten-frame-cell';
                if (i < number) {
                    cell.classList.add('filled');
                    cell.textContent = 'â—';
                    cell.style.color = 'white';
                }
                grid.appendChild(cell);
            }
            
            container.style.display = 'block';
        }

        // Hundreds Chart
        function showHundredsChart() {
            const multiple = parseInt(document.getElementById('hundredsMultiple').value);

            if (isNaN(multiple) || multiple <= 0) {
                return;
            }

            const container = document.getElementById('hundredsChartContainer');
            const grid = document.getElementById('hundredsChartGrid');
            
            grid.innerHTML = '';
            
            for (let i = 1; i <= 100; i++) {
                const cell = document.createElement('div');
                cell.className = 'hundreds-cell';
                cell.textContent = i;
                
                if (i % multiple === 0) {
                    cell.classList.add('highlighted');
                }
                
                cell.addEventListener('click', function() {
                    this.classList.toggle('highlighted');
                });
                
                grid.appendChild(cell);
            }
            
            container.style.display = 'block';
        }

        // Factor Tree
        function createFactorTree() {
            const number = parseInt(document.getElementById('factorNumber').value);

            if (isNaN(number) || number < 2) {
                showResult('factorTreeResult', 'Please enter a number greater than 1', true);
                return;
            }

            function getPrimeFactors(n) {
                const factors = [];
                let d = 2;
                while (d * d <= n) {
                    while (n % d === 0) {
                        factors.push(d);
                        n /= d;
                    }
                    d++;
                }
                if (n > 1) factors.push(n);
                return factors;
            }

            function buildFactorTree(n, level = 0) {
                if (n < 2) return '';
                
                // Find smallest factor
                for (let i = 2; i <= Math.sqrt(n); i++) {
                    if (n % i === 0) {
                        const indent = '&nbsp;'.repeat(level * 4);
                        return `${indent}${n} = ${i} Ã— ${n/i}<br>` +
                               buildFactorTree(i, level + 1) +
                               buildFactorTree(n/i, level + 1);
                    }
                }
                
                // n is prime
                const indent = '&nbsp;'.repeat(level * 4);
                return `${indent}${n} (prime)<br>`;
            }

            const primeFactors = getPrimeFactors(number);
            const tree = buildFactorTree(number);
            
            let output = `<strong>Factor Tree for ${number}:</strong><br><br>`;
            output += `<div style="font-family: monospace; font-size: 14px; line-height: 1.6;">`;
            output += tree;
            output += `</div><br>`;
            output += `<strong>Prime Factorization:</strong> ${number} = ${primeFactors.join(' Ã— ')}<br>`;
            output += `<strong>Prime Factors:</strong> ${[...new Set(primeFactors)].join(', ')}`;

            showResult('factorTreeResult', output);
        }

        // Multiplication Number Bond
        function showMultiplicationBond() {
            const product = parseInt(document.getElementById('multBondProduct').value);

            if (isNaN(product) || product < 1) {
                showResult('multBondResult', 'Please enter a positive number', true);
                return;
            }

            const factorPairs = [];
            for (let i = 1; i <= Math.sqrt(product); i++) {
                if (product % i === 0) {
                    factorPairs.push([i, product / i]);
                }
            }

            let output = `<strong>Multiplication Number Bonds for ${product}:</strong><br><br>`;
            
            for (let pair of factorPairs) {
                output += `<div style="margin: 15px 0; padding: 10px; border: 2px solid #4facfe; border-radius: 10px; display: inline-block; margin-right: 10px;">`;
                output += `<div style="text-align: center;">`;
                output += `<div style="background: #4facfe; color: white; padding: 5px 10px; border-radius: 5px; margin-bottom: 5px;">${pair[0]}</div>`;
                output += `<div style="font-size: 18px;">Ã—</div>`;
                output += `<div style="background: #4facfe; color: white; padding: 5px 10px; border-radius: 5px; margin: 5px 0;">${pair[1]}</div>`;
                output += `<div style="font-size: 18px;">=</div>`;
                output += `<div style="background: #00f2fe; color: white; padding: 5px 10px; border-radius: 5px; margin-top: 5px; font-weight: bold;">${product}</div>`;
                output += `</div></div>`;
            }

            showResult('multBondResult', output);
        }

        // Addition Number Bond
        function showAdditionBond() {
            const sum = parseInt(document.getElementById('addBondSum').value);

            if (isNaN(sum) || sum < 1) {
                showResult('addBondResult', 'Please enter a positive number', true);
                return;
            }

            let output = `<strong>Addition Number Bonds for ${sum}:</strong><br><br>`;
            
            for (let i = 0; i <= sum; i++) {
                const complement = sum - i;
                output += `<div style="margin: 10px 0; padding: 10px; border: 2px solid #667eea; border-radius: 10px; display: inline-block; margin-right: 10px;">`;
                output += `<div style="text-align: center;">`;
                output += `<div style="background: #667eea; color: white; padding: 5px 10px; border-radius: 5px; margin-bottom: 5px;">${i}</div>`;
                output += `<div style="font-size: 18px;">+</div>`;
                output += `<div style="background: #667eea; color: white; padding: 5px 10px; border-radius: 5px; margin: 5px 0;">${complement}</div>`;
                output += `<div style="font-size: 18px;">=</div>`;
                output += `<div style="background: #764ba2; color: white; padding: 5px 10px; border-radius: 5px; margin-top: 5px; font-weight: bold;">${sum}</div>`;
                output += `</div></div>`;
            }

            showResult('addBondResult', output);
        }

        // Focus Statement Mode
        function generateFocusStatement() {
            const type = document.getElementById('focusType').value;
            const topic = document.getElementById('focusTopic').value.trim();
            const difficulty = document.getElementById('focusDifficulty').value;

            if (!topic) {
                showResult('focusResult', 'Please enter a topic', true);
                return;
            }

            let statement = '';
            
            switch (type) {
                case 'equation':
                    if (difficulty === 'beginner') {
                        statement = `Solve for x: 2x + 5 = 13 (${topic})`;
                    } else if (difficulty === 'intermediate') {
                        statement = `Solve the system: 2x + 3y = 12, x - y = 1 (${topic})`;
                    } else {
                        statement = `Find the roots of: xÂ² - 5x + 6 = 0 using the quadratic formula (${topic})`;
                    }
                    break;
                    
                case 'word-problem':
                    if (difficulty === 'beginner') {
                        statement = `A rectangle has a length of 8 units and width of 5 units. Find its area and perimeter. (${topic})`;
                    } else if (difficulty === 'intermediate') {
                        statement = `A train travels 240 miles in 4 hours. If it increases its speed by 10 mph, how long will it take to travel 300 miles? (${topic})`;
                    } else {
                        statement = `An investment of $5000 grows at 6% compound interest annually. How much will it be worth after 8 years? (${topic})`;
                    }
                    break;
                    
                case 'theorem':
                    if (difficulty === 'beginner') {
                        statement = `State and explain the Pythagorean Theorem with an example. (${topic})`;
                    } else if (difficulty === 'intermediate') {
                        statement = `Prove that the sum of angles in any triangle equals 180Â°. (${topic})`;
                    } else {
                        statement = `Prove the Fundamental Theorem of Calculus and explain its significance. (${topic})`;
                    }
                    break;
                    
                case 'definition':
                    if (difficulty === 'beginner') {
                        statement = `Define what a prime number is and give three examples. (${topic})`;
                    } else if (difficulty === 'intermediate') {
                        statement = `Define the concept of a function and explain domain and range. (${topic})`;
                    } else {
                        statement = `Define continuity of a function at a point using the epsilon-delta definition. (${topic})`;
                    }
                    break;
            }

            let output = `<strong>Focus Statement Generated:</strong><br><br>`;
            output += `<div style="background: #f8f9fa; padding: 20px; border-left: 4px solid #4facfe; border-radius: 5px; font-size: 16px; line-height: 1.6;">`;
            output += statement;
            output += `</div><br>`;
            output += `<strong>Type:</strong> ${type.charAt(0).toUpperCase() + type.slice(1)}<br>`;
            output += `<strong>Topic:</strong> ${topic}<br>`;
            output += `<strong>Difficulty:</strong> ${difficulty.charAt(0).toUpperCase() + difficulty.slice(1)}`;

            showResult('focusResult', output);
        }

        // Add CSS animation for dice
        const style = document.createElement('style');
        style.textContent = `
            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                40% { transform: translateY(-10px); }
                60% { transform: translateY(-5px); }
            }
        `;
        document.head.appendChild(style);

        // Initialize transformation controls
        document.getElementById('transformationType').addEventListener('change', function() {
            const type = this.value;
            const controls = document.getElementById('transformationControls');
            
            let controlsHTML = '';
            switch (type) {
                case 'translate':
                    controlsHTML = `
                        <div class="input-group">
                            <label>X Translation:</label>
                            <input type="number" id="translateX" placeholder="Units to move right" value="0">
                        </div>
                        <div class="input-group">
                            <label>Y Translation:</label>
                            <input type="number" id="translateY" placeholder="Units to move up" value="0">
                        </div>
                    `;
                    break;
                case 'rotate':
                    controlsHTML = `
                        <div class="input-group">
                            <label>Rotation Angle (degrees):</label>
                            <input type="number" id="rotateAngle" placeholder="Degrees" value="90">
                        </div>
                    `;
                    break;
                case 'reflect':
                    controlsHTML = `
                        <div class="input-group">
                            <label>Reflection Line:</label>
                            <select id="reflectLine">
                                <option value="x-axis">X-axis</option>
                                <option value="y-axis">Y-axis</option>
                                <option value="y=x">Line y = x</option>
                                <option value="y=-x">Line y = -x</option>
                            </select>
                        </div>
                    `;
                    break;
                case 'scale':
                    controlsHTML = `
                        <div class="input-group">
                            <label>Scale Factor:</label>
                            <input type="number" id="scaleFactor" placeholder="Scale factor" value="2" step="0.1" min="0.1">
                        </div>
                    `;
                    break;
            }
            
            controls.innerHTML = controlsHTML;
        });

        // Initialize with translation controls
        document.getElementById('transformationType').dispatchEvent(new Event('change'));
    </script>
</body>
</html>